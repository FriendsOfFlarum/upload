/*! For license information please see forum.js.LICENSE.txt */
(()=>{var t={24:(t,e,i)=>{var o=i(735).default;function a(){"use strict";t.exports=a=function(){return i},t.exports.__esModule=!0,t.exports.default=t.exports;var e,i={},r=Object.prototype,n=r.hasOwnProperty,s=Object.defineProperty||function(t,e,i){t[e]=i.value},l="function"==typeof Symbol?Symbol:{},u=l.iterator||"@@iterator",f=l.asyncIterator||"@@asyncIterator",c=l.toStringTag||"@@toStringTag";function d(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(e){d=function(t,e,i){return t[e]=i}}function p(t,e,i,o){var a=e&&e.prototype instanceof w?e:w,r=Object.create(a.prototype),n=new C(o||[]);return s(r,"_invoke",{value:D(t,i,n)}),r}function h(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}i.wrap=p;var m="suspendedStart",v="suspendedYield",g="executing",y="completed",b={};function w(){}function F(){}function x(){}var S={};d(S,u,(function(){return this}));var L=Object.getPrototypeOf,N=L&&L(L(O([])));N&&N!==r&&n.call(N,u)&&(S=N);var k=x.prototype=w.prototype=Object.create(S);function _(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function B(t,e){function i(a,r,s,l){var u=h(t[a],t,r);if("throw"!==u.type){var f=u.arg,c=f.value;return c&&"object"==o(c)&&n.call(c,"__await")?e.resolve(c.__await).then((function(t){i("next",t,s,l)}),(function(t){i("throw",t,s,l)})):e.resolve(c).then((function(t){f.value=t,s(f)}),(function(t){return i("throw",t,s,l)}))}l(u.arg)}var a;s(this,"_invoke",{value:function(t,o){function r(){return new e((function(e,a){i(t,o,e,a)}))}return a=a?a.then(r,r):r()}})}function D(t,i,o){var a=m;return function(r,n){if(a===g)throw Error("Generator is already running");if(a===y){if("throw"===r)throw n;return{value:e,done:!0}}for(o.method=r,o.arg=n;;){var s=o.delegate;if(s){var l=E(s,o);if(l){if(l===b)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(a===m)throw a=y,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);a=g;var u=h(t,i,o);if("normal"===u.type){if(a=o.done?y:v,u.arg===b)continue;return{value:u.arg,done:o.done}}"throw"===u.type&&(a=y,o.method="throw",o.arg=u.arg)}}}function E(t,i){var o=i.method,a=t.iterator[o];if(a===e)return i.delegate=null,"throw"===o&&t.iterator.return&&(i.method="return",i.arg=e,E(t,i),"throw"===i.method)||"return"!==o&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+o+"' method")),b;var r=h(a,t.iterator,i.arg);if("throw"===r.type)return i.method="throw",i.arg=r.arg,i.delegate=null,b;var n=r.arg;return n?n.done?(i[t.resultName]=n.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,b):n:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,b)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function U(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function O(t){if(t||""===t){var i=t[u];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,r=function i(){for(;++a<t.length;)if(n.call(t,a))return i.value=t[a],i.done=!1,i;return i.value=e,i.done=!0,i};return r.next=r}}throw new TypeError(o(t)+" is not iterable")}return F.prototype=x,s(k,"constructor",{value:x,configurable:!0}),s(x,"constructor",{value:F,configurable:!0}),F.displayName=d(x,c,"GeneratorFunction"),i.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===F||"GeneratorFunction"===(e.displayName||e.name))},i.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,d(t,c,"GeneratorFunction")),t.prototype=Object.create(k),t},i.awrap=function(t){return{__await:t}},_(B.prototype),d(B.prototype,f,(function(){return this})),i.AsyncIterator=B,i.async=function(t,e,o,a,r){void 0===r&&(r=Promise);var n=new B(p(t,e,o,a),r);return i.isGeneratorFunction(e)?n:n.next().then((function(t){return t.done?t.value:n.next()}))},_(k),d(k,c,"Generator"),d(k,u,(function(){return this})),d(k,"toString",(function(){return"[object Generator]"})),i.keys=function(t){var e=Object(t),i=[];for(var o in e)i.push(o);return i.reverse(),function t(){for(;i.length;){var o=i.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},i.values=O,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(U),!t)for(var i in this)"t"===i.charAt(0)&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function o(o,a){return s.type="throw",s.arg=t,i.next=o,a&&(i.method="next",i.arg=e),!!a}for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a],s=r.completion;if("root"===r.tryLoc)return o("end");if(r.tryLoc<=this.prev){var l=n.call(r,"catchLoc"),u=n.call(r,"finallyLoc");if(l&&u){if(this.prev<r.catchLoc)return o(r.catchLoc,!0);if(this.prev<r.finallyLoc)return o(r.finallyLoc)}else if(l){if(this.prev<r.catchLoc)return o(r.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return o(r.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=t,r.arg=e,a?(this.method="next",this.next=a.finallyLoc,b):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),U(i),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var o=i.completion;if("throw"===o.type){var a=o.arg;U(i)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,i,o){return this.delegate={iterator:O(t),resultName:i,nextLoc:o},"next"===this.method&&(this.arg=e),b}},i}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},735:t=>{function e(i){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(i)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},183:(t,e,i)=>{var o=i(24)();t.exports=o;try{regeneratorRuntime=o}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}}},e={};function i(o){var a=e[o];if(void 0!==a)return a.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,i),r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var o in e)i.o(e,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};(()=>{"use strict";i.r(o),i.d(o,{components:()=>gt,extend:()=>mt});const t=flarum.core.compat["forum/app"];var e=i.n(t);const a=flarum.core.compat["common/models/User"];var r=i.n(a);const n=flarum.core.compat["common/Model"];var s=i.n(n);const l=flarum.core.compat["common/extend"],u=flarum.core.compat["forum/components/Post"];var f=i.n(u);const c=flarum.core.compat["common/components/TextEditor"];var d=i.n(c);function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function h(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,p(t,e)}const v=flarum.core.compat["common/Component"];var g=i.n(v);const y=flarum.core.compat["common/components/TextEditorButton"];var b=i.n(y);const w=flarum.core.compat["common/components/LoadingIndicator"];var F=i.n(w);const x=flarum.core.compat["common/utils/classList"];var S=i.n(x),L=function(t){function i(){return t.apply(this,arguments)||this}h(i,t);var o=i.prototype;return o.oninit=function(e){var i=this;t.prototype.oninit.call(this,e),this.attrs.uploader.on("uploaded",(function(){i.$("form")[0].reset(),m.redraw()})),this.isMediaUploadButton=e.attrs.isMediaUploadButton||!1},o.view=function(){var t=this.attrs.uploader.uploading?e().translator.trans("fof-upload.forum.states.loading"):e().translator.trans("fof-upload.forum.buttons.upload");return m(b(),{className:S()(["Button","hasIcon","fof-upload-button",!this.isMediaUploadButton&&!this.attrs.uploader.uploading&&"Button--icon",!this.isMediaUploadButton&&!this.attrs.uploader.uploading&&"Button--link",this.attrs.uploader.uploading&&"uploading"]),icon:!this.attrs.uploader.uploading&&"fas fa-file-upload",onclick:this.uploadButtonClicked.bind(this),disabled:this.attrs.disabled,title:t},this.attrs.uploader.uploading&&m(F(),{size:"small",display:"inline",className:"Button-icon"}),(this.isMediaUploadButton||this.attrs.uploader.uploading)&&m("span",{className:"Button-label"},t),m("form",null,m("input",{type:"file",multiple:!0,onchange:this.process.bind(this)})))},o.process=function(t){var e=this.$("input").prop("files");0!==e.length&&this.attrs.uploader.upload(e,!this.isMediaUploadButton)},o.uploadButtonClicked=function(t){this.$("input").click()},i}(g()),N=function(){function t(t,e){this.upload=t,this.composerElement=e,this.handlers={},this.supportsFileDragging()&&(this.composerElement.addEventListener("dragover",this.handlers.in=this.in.bind(this)),this.composerElement.addEventListener("dragleave",this.handlers.out=this.out.bind(this)),this.composerElement.addEventListener("dragend",this.handlers.out),this.composerElement.addEventListener("drop",this.handlers.dropping=this.dropping.bind(this)))}var e=t.prototype;return e.supportsFileDragging=function(){var t=document.createElement("div");return("draggable"in t||"ondragstart"in t&&"ondrop"in t)&&"FormData"in window&&"FileReader"in window},e.unload=function(){this.handlers.in&&(this.composerElement.removeEventListener("dragover",this.handlers.in),this.composerElement.removeEventListener("dragleave",this.handlers.out),this.composerElement.removeEventListener("dragend",this.handlers.out),this.composerElement.removeEventListener("drop",this.handlers.dropping))},e.isNotFile=function(t){if(t.dataTransfer.items)for(var e=0;e<t.dataTransfer.items.length;e++)if("file"!==t.dataTransfer.items[e].kind)return!0;return!1},e.in=function(t){this.isNotFile(t)||(t.preventDefault(),this.over||(this.composerElement.classList.add("fof-upload-dragging"),this.over=!0))},e.out=function(t){this.isNotFile(t)||(t.preventDefault(),this.over&&(this.composerElement.classList.remove("fof-upload-dragging"),this.over=!1))},e.dropping=function(t){this.isNotFile(t)||(t.preventDefault(),this.upload(t.dataTransfer.files),this.composerElement.classList.remove("fof-upload-dragging"))},t}(),k=function(){function t(t,e){this.upload=t,e.addEventListener("paste",this.paste.bind(this))}return t.prototype.paste=function(t){if(t.clipboardData&&t.clipboardData.items){for(var e=t.clipboardData.items,i=[],o=0;o<e.length;o++)-1!==e[o].type.indexOf("image")&&i.push(e[o].getAsFile());i.length>0&&(t.preventDefault(),this.upload(i))}},t}(),_=function(){function t(){this.callbacks={success:[],failure:[],uploading:[],uploaded:[]},this.uploading=!1}var i=t.prototype;return i.setState=function(t){this.fileState=t},i.on=function(t,e){this.callbacks[t].push(e)},i.dispatch=function(t,e){this.callbacks[t].forEach((function(t){return t(e)}))},i.upload=function(t,i){var o=this;void 0===i&&(i=!0),this.uploading=!0,this.dispatch("uploading",t),m.redraw();for(var a=new FormData,r=0;r<t.length;r++)a.append("files[]",t[r]);return e().request({method:"POST",url:e().forum.attribute("apiUrl")+"/fof/upload",serialize:function(t){return t},body:a}).then((function(t){return o.uploaded(t,i)})).catch((function(t){o.uploading=!1,m.redraw();var i=t.response.errors[0];if(!i.code.includes("fof-upload"))throw t;e().alerts.clear(),e().alerts.show({type:"error"},i.detail)}))},i.uploaded=function(t,i){var o=this;void 0===i&&(i=!1),this.uploading=!1,t.data.forEach((function(t){var a,r=e().store.pushObject(t);null==(a=o.fileState)||a.addToList(r),o.dispatch("success",{file:r,addBBcode:i})})),this.dispatch("uploaded")},t}();const B=flarum.core.compat["common/components/Button"];var D=i.n(B);const E=flarum.core.compat["common/components/Modal"];var M=i.n(E);const U=flarum.core.compat["common/app"];var C=i.n(U);function O(t,e,i,o,a,r,n){try{var s=t[r](n),l=s.value}catch(t){return void i(t)}s.done?e(l):Promise.resolve(l).then(o,a)}function T(t){return function(){var e=this,i=arguments;return new Promise((function(o,a){var r=t.apply(e,i);function n(t){O(r,o,a,n,s,"next",t)}function s(t){O(r,o,a,n,s,"throw",t)}n(void 0)}))}}var I=i(183),A=i.n(I),P=new Map([["image/png","far fa-file-image"],["image/jpg","far fa-file-image"],["image/jpeg","far fa-file-image"],["image/svg+xml","far fa-file-image"],["image/gif","far fa-file-image"],["image/bmp","far fa-file-image"],["image/webp","far fa-file-image"],["application/zip","far fa-file-archive"],["application/x-7z-compressed","far fa-file-archive"],["application/gzip","far fa-file-archive"],["application/vnd.rar","far fa-file-archive"],["application/x-rar-compressed","far fa-file-archive"],["application/x-tar","far fa-file-archive"],["application/x-iso9660-image","far fa-file-archive"],["text/plain","far fa-file-alt"],["text/csv","far fa-file-csv"],["text/xml","far fa-file-code"],["text/html","far fa-file-code"],["text/css","far fa-file-code"],["text/javascript","far fa-file-code"],["application/json","far fa-file-code"],["application/ld+json","far fa-file-code"],["application/x-httpd-php","far fa-file-code"],["application/xml","far fa-file-code"],["text/xml","far fa-file-code"],["application/x-abiword","far fa-file-word"],["application/msword","far fa-file-word"],["application/vnd.openxmlformats-officedocument.wordprocessingml.document","far fa-file-word"],["application/vnd.oasis.opendocument.text","far fa-file-word"],["application/vnd.ms-excel","far fa-file-excel"],["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","far fa-file-excel"],["application/vnd.oasis.opendocument.spreadsheet","far fa-file-excel"],["application/vnd.ms-powerpoint","far fa-file-powerpoint"],["application/vnd.openxmlformats-officedocument.presentationml.presentation","far fa-file-powerpoint"],["application/vnd.oasis.opendocument.presentation","far fa-file-powerpoint"],["application/pdf","far fa-file-pdf"],["application/rtf","far fa-file-alt"],["application/epub+zip","far fa-book"],["application/x-mobipocket-ebook","far fa-book"],["application/vnd.amazon.ebook","far fa-book"],["audio/mpeg","far fa-file-audio"],["audio/wav","far fa-file-audio"],["audio/x-wav","far fa-file-audio"],["audio/aac","far fa-file-audio"],["audio/ogg","far fa-file-audio"],["audio/flac","far fa-file-audio"],["audio/aiff","far fa-file-audio"],["audio/x-aiff","far fa-file-audio"],["video/x-msvideo","far fa-file-video"],["video/mp4","far fa-file-video"],["video/quicktime","far fa-file-video"]]);function j(t){return P.get(t)||(t.startsWith("image/")?"far fa-file-image":t.startsWith("video/")?"far fa-file-video":t.startsWith("audio/")?"far fa-file-audio":"far fa-file")}const R=flarum.core.compat["common/helpers/icon"];var H=i.n(R);const z=flarum.core.compat["common/utils/ItemList"];var G=i.n(z);const $=flarum.core.compat["common/components/Tooltip"];var q=i.n($);const W=flarum.core.compat["common/utils/extractText"];var V=i.n(W),Y=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).isFileHiding=void 0,e.imageLoaded=!0,e.file=void 0,e.fileIcon=void 0,e.isSelected=void 0,e.isSelectable=void 0,e.handleImageError=function(){e.imageLoaded=!1,e.fileIcon="fas fa-exclamation-triangle",e.isSelectable=!1,m.redraw()},e.handleImageLoad=function(){e.imageLoaded=!0,m.redraw()},e}h(e,t);var i=e.prototype;return i.oninit=function(e){t.prototype.oninit.call(this,e),this.file=this.attrs.file,this.isFileHiding=void 0!==this.attrs.isFileHiding&&this.attrs.isFileHiding,this.fileIcon=j(this.file.type()),this.isSelected=void 0!==this.attrs.isSelected&&this.attrs.isSelected,this.isSelectable=void 0===this.attrs.fileSelectable||this.attrs.fileSelectable},i.onbeforeupdate=function(e){t.prototype.onbeforeupdate.call(this,e),this.isSelected=void 0!==this.attrs.isSelected&&this.attrs.isSelected},i.view=function(){var t=this,e=this.file.type().startsWith("image/"),i=this.isSelected?"selected":"";return m("div",{className:"UploadedFile "+i,key:this.file.uuid(),onclick:function(){t.isSelectable&&!t.isFileHiding&&(t.isSelected=!t.isSelected,t.attrs.onFileClick(t.file))},disabled:!this.isSelectable||this.isFileHiding},this.imageLoaded&&e?m("img",{src:this.file.url(),className:"fof-file-image-preview",draggable:!1,onerror:this.handleImageError,onload:this.handleImageLoad,alt:this.file.baseName()}):this.displayIcon(this.fileIcon),m("div",{className:"fof-file-actions"},this.actionItems(this.file).toArray()),m("div",{className:"fof-file-name"},m(q(),{text:this.file.baseName()},m("span",null,this.file.baseName()))),this.isFileHiding&&m("div",{class:"fof-file-loading",role:"status","aria-label":C().translator.trans("fof-upload.lib.file_list.hide_file.loading")},m(F(),null)))},i.displayIcon=function(t){return m("span",{className:"fof-file-icon",role:"presentation",style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}},H()("fa-fw "+t))},i.actionItems=function(t){var e=this,i=new(G());t.canViewInfo()&&i.add("view-info",m(D(),{className:"Button Button--icon fof-file-action",icon:"fas fa-info-circle","aria-label":"info",onclick:function(){return e.viewFileInfo()}}),100);var o=t.isShared()?"fof-upload.lib.file_list.hide_shared_file":"fof-upload.lib.file_list.hide_file",a=C().translator.trans(this.file.hidden()?o+".btn_a11y_label_show":o+".btn_a11y_label_hide",{fileName:t.baseName()});t.canHide()&&i.add("hide-file",m(q(),{text:a,position:"bottom"},m(D(),{className:"Button Button--icon fof-file-action",icon:this.file.hidden()?"fas fa-eye":"fas fa-eye-slash","aria-label":a,disabled:this.isFileHiding,onclick:function(t){return e.hide(t)}})),80);var r=C().translator.trans("fof-upload.lib.file_list.delete_file_a11y_label",{fileName:t.baseName()});return t.canDelete()&&i.add("delete-file",m(q(),{text:r,position:"bottom"},m(D(),{className:"Button Button--icon fof-file-action",icon:"fas fa-trash","aria-label":r,disabled:this.isFileHiding,onclick:function(t){return e.confirmDelete(t)}})),60),i},i.viewFileInfo=function(){console.log("view file info")},i.hide=function(t){t.stopPropagation(),this.attrs.onHide&&this.attrs.onHide(this.file)},i.confirmDelete=function(){var t=T(A().mark((function t(e){var i;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.stopPropagation(),!confirm(V()(C().translator.trans("fof-upload.lib.file_list.delete_confirmation",{fileName:this.file.baseName()})))){t.next=6;break}return i=this.file.uuid(),t.next=5,C().request({method:"DELETE",url:C().forum.attribute("apiUrl")+"/fof/upload/delete/"+i});case 5:this.attrs.onDelete&&this.attrs.onDelete(this.file);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}(g());const J=flarum.core.compat["common/components/Alert"];var K=i.n(J),Q=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).user=null,e.inModal=void 0,e.restrictFileType=void 0,e.downloadOnClick=void 0,e.filesBeingHidden=void 0,e.fileState=void 0,e}h(e,t);var i=e.prototype;return i.oninit=function(e){t.prototype.oninit.call(this,e),this.inModal=this.attrs.selectable,this.restrictFileType=this.attrs.restrictFileType||null,this.downloadOnClick=this.attrs.downloadOnClick||!1,this.filesBeingHidden=[],this.fileState=this.attrs.fileState,this.loadFileList()},i.view=function(){var t=this;return m("div",{className:"SharedFileList fof-upload-file-list","aria-live":"polite"},this.isLoading()&&0===this.fileCollection().length&&m("div",{className:"fof-upload-loading"},C().translator.trans("fof-upload.lib.file_list.loading"),m(F(),null)),!this.isLoading()&&0===this.fileCollection().length&&m("div",{className:"Placeholder"},m("p",{className:"fof-upload-empty"},C().translator.trans("fof-upload.lib.file_list.empty"))),m("ul",null,this.fileCollection().map((function(e){var i,o,a=j(e.type()),r=!t.restrictFileType||t.isSelectable(e),n=S()(["fof-file","far fa-file-image"===a&&"fof-file-type-image",t.attrs.selectedFiles&&t.attrs.selectedFiles.indexOf(null!=(i=e.id())?i:"")>=0&&"fof-file-selected"]),s=t.filesBeingHidden.includes(e.uuid());return m("li",{"aria-busy":s,key:e.uuid()},m(Y,{file:e,fileSelectable:r,isSelected:t.attrs.selectedFiles&&t.attrs.selectedFiles.indexOf(null!=(o=e.id())?o:"")>=0,fileClassNames:n,isFileHiding:s,onHide:t.hideFile.bind(t),onFileClick:t.onFileClick.bind(t),user:t.attrs.user,onDelete:t.onDelete.bind(t)}))}))),this.hasMoreResults()&&m("div",{className:"fof-load-more-files"},m(D(),{className:"Button Button--primary",disabled:this.isLoading(),loading:this.isLoading(),onclick:function(){return t.loadMore()}},C().translator.trans("fof-upload.lib.file_list.load_more_files_btn"))))},i.onDelete=function(t){this.attrs.onDelete&&this.attrs.onDelete(t)},i.onFileClick=function(t){this.attrs.onFileSelect?this.attrs.onFileSelect(t):this.attrs.downloadOnClick&&window.open(t.url())},i.isSelectable=function(t){var e=t.type();return Array.isArray(this.restrictFileType)?this.restrictFileType.indexOf(e)>=0:"image"===this.restrictFileType?e.includes("image/"):"audio"===this.restrictFileType?e.includes("audio/"):"video"===this.restrictFileType&&e.includes("video/")},i.hideFile=function(){var t=T(A().mark((function t(e){var i,o,a,r,n;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.uuid(),!this.filesBeingHidden.includes(i)){t.next=3;break}return t.abrupt("return");case 3:if(this.filesBeingHidden.push(i),o=e.isShared()?"fof-upload.lib.file_list.hide_shared_file":"fof-upload.lib.file_list.hide_file",!confirm(V()(C().translator.trans(e.hidden()?o+".show_confirmation":o+".hide_confirmation",{fileName:e.baseName()})))){t.next=24;break}return t.prev=7,t.next=10,C().request({method:"PATCH",url:C().forum.attribute("apiUrl")+"/fof/upload/hide",body:{uuid:i}});case 10:a=t.sent,C().store.pushPayload(a),m.redraw(),C().alerts.show(K(),{type:"success"},[H()(e.hidden()?"fas fa-eye-slash":"fas fa-eye")," ",C().translator.trans(null!=e&&e.hidden()?o+".hide_success":o+".show_success")]),this.fileState.user&&(r=this.fileState.files.findIndex((function(t){return i===t.uuid()})),this.fileState.files.splice(r,1)),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(7),C().alerts.show(K(),{type:"error"},C().translator.trans(null!=e&&e.hidden()?o+".hide_fail":o+".show_fail",{fileName:e.baseName()}));case 20:return t.prev=20,n=this.filesBeingHidden.indexOf(i),this.filesBeingHidden.splice(n,1),t.finish(20);case 24:case"end":return t.stop()}}),t,this,[[7,17,20,24]])})));return function(e){return t.apply(this,arguments)}}(),e}(g()),X=function(t){function e(){return t.apply(this,arguments)||this}h(e,t);var i=e.prototype;return i.loadFileList=function(){this.fileState.setUser(this.attrs.user||C().session.user),this.user=this.fileState.user},i.hasMoreResults=function(){return this.fileState.hasMoreResults()},i.loadMore=function(){this.fileState.loadMore()},i.isLoading=function(){return this.fileState.isLoading()},i.fileCollection=function(){return this.fileState.files},e}(Q);const Z=flarum.core.compat["common/components/Switch"];var tt=i.n(Z),et=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).files=[],e.fileInput=null,e.options={shared:!0,hidden:!1},e.loading=!1,e}h(e,t);var i=e.prototype;return i.oninit=function(e){t.prototype.oninit.call(this,e)},i.className=function(){return"UploadSharedFileModal Modal--medium"},i.title=function(){return C().translator.trans("fof-upload.lib.upload-shared-file-modal.title")},i.onFileChange=function(t){this.addFiles(Array.from(t.target.files))},i.addFiles=function(t){var e;(e=this.files).push.apply(e,t),m.redraw()},i.onDragOver=function(t){t.preventDefault(),t.stopPropagation()},i.onDrop=function(t){t.preventDefault(),t.stopPropagation(),t.dataTransfer&&t.dataTransfer.files&&this.addFiles(Array.from(t.dataTransfer.files))},i.onDropzoneClick=function(){this.fileInput&&this.fileInput.click()},i.content=function(){var t=this;return m("div",{className:"Modal-body"},m("div",{className:"UploadSharedFileModal-dropzone",onclick:function(){return t.onDropzoneClick()},ondragover:this.onDragOver.bind(this),ondrop:this.onDrop.bind(this)},C().translator.trans("fof-upload.lib.upload-shared-file-modal.dropzone"),m("input",{type:"file",multiple:!0,onchange:this.onFileChange.bind(this),style:{opacity:0,position:"absolute",left:"-9999px"},oncreate:function(e){t.fileInput=e.dom}})),m("div",{className:"UploadSharedFileModal-files"},this.files.map((function(e){var i=e.type.startsWith("image/");return m("div",{className:"UploadedFile"},i?m("img",{src:URL.createObjectURL(e),alt:e.name}):m("i",{className:j(e.type)}),m("div",{className:"UploadedFile-name"},e.name),m(D(),{className:"Button Button--icon Button--link UploadedFile-remove",icon:"fas fa-times",onclick:function(){t.files=t.files.filter((function(t){return t!==e}))}}))}))),m("div",{className:"UploadSharedFileModal-options Form-group"},m(tt(),{state:this.options.hidden,onchange:function(e){return t.options.hidden=e}},C().translator.trans("fof-upload.lib.upload-shared-file-modal.hide-from-media-gallery"))),m("div",{className:"UploadSharedFileModal-submit App-primaryControl"},m(D(),{className:"Button Button--primary",loading:this.loading,onclick:this.upload.bind(this),disabled:!this.files.length||this.loading},C().translator.trans("fof-upload.lib.upload-shared-file-modal.upload"))))},i.upload=function(){var t=T(A().mark((function t(){var e,i,o,a=this;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,m.redraw(),e=new FormData,this.files.forEach((function(t){e.append("files[]",t)})),Object.keys(this.options).forEach((function(t){e.append("options["+t+"]",a.options[t])})),t.next=7,C().request({method:"POST",url:C().forum.attribute("apiUrl")+"/fof/upload",serialize:function(t){return t},body:e});case 7:i=t.sent,o=C().store.pushPayload(i),this.attrs.onUploadComplete(o),this.files=[],this.hide(),this.loading=!1,m.redraw();case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e}(M()),it=function(t){function e(){return t.apply(this,arguments)||this}h(e,t);var i=e.prototype;return i.loadFileList=function(){this.fileState.loadResults()},i.hasMoreResults=function(){return this.fileState.hasMoreResults()},i.loadMore=function(){this.fileState.loadMore()},i.isLoading=function(){return this.fileState.isLoading()},i.fileCollection=function(){return this.fileState.files},e}(Q),ot=function(){function t(t){void 0===t&&(t=!1),this.user=void 0,this.files=void 0,this.moreResults=void 0,this.loading=void 0,this.sharedFiles=void 0,this.user=null,this.files=[],this.moreResults=!1,this.loading=!1,this.sharedFiles=t}var e=t.prototype;return e.setUser=function(t){t!==this.user&&(this.user=t,this.files=[],this.loadResults())},e.refresh=function(){this.files=[],this.loadResults(),m.redraw()},e.loadResults=function(){var t=T(A().mark((function t(e){var i,o,a;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e&&(e=0),this.sharedFiles||this.user){t.next=3;break}return t.abrupt("return",Promise.reject("User not set"));case 3:return this.loading=!0,i="fof/uploads",o={},!this.sharedFiles&&this.user?o={filter:{user:this.user.id()},page:{offset:e}}:(i="fof/upload/shared-files",o={page:{offset:e}}),t.next=9,C().store.find(i,o);case 9:return a=t.sent,t.abrupt("return",this.parseResults(a));case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.loadMore=function(){var t=T(A().mark((function t(){return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.abrupt("return",this.loadResults(this.files.length));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.parseResults=function(t){var e;return this.files=this.files.concat(t),this.loading=!1,this.moreResults=!(null==(e=t.payload)||null==(e=e.links)||!e.next),m.redraw(),t},e.addToList=function(t){var e;Array.isArray(t)?(e=this.files).unshift.apply(e,t):this.files.unshift(t),m.redraw()},e.removeFromList=function(t){Array.isArray(t)?this.files=this.files.filter((function(e){return!t.includes(e)})):this.files=this.files.filter((function(e){return e!==t})),m.redraw()},e.hasFiles=function(){return this.files.length>0},e.isLoading=function(){return this.loading},e.hasMoreResults=function(){return this.moreResults},e.empty=function(){return!this.hasFiles()&&!this.isLoading()},t}(),at=function(t){function i(){return t.apply(this,arguments)||this}h(i,t);var o=i.prototype;return o.oninit=function(e){t.prototype.oninit.call(this,e),this.uploader=e.attrs.uploader,this.selectedFiles=[],this.multiSelect=void 0===e.attrs.multiSelect||e.attrs.multiSelect,this.restrictFileType=e.attrs.restrictFileType||null,this.dragDrop=null,this.selectedFilesLibrary=e.attrs.defaultFilesLibrary||"user",this.sharedUploads=null,this.userFileState=new ot,this.sharedFileState=new ot(!0),this.uploader.setState(this.userFileState),this.onUpload()},o.className=function(){return"Modal--large fof-file-manager-modal"},o.oncreate=function(e){var i=this;t.prototype.oncreate.call(this,e),this.dragDrop=new N((function(t){return i.uploader.upload(t,!1)}),this.$().find(".Modal-content")[0])},o.onremove=function(){this.dragDrop&&this.dragDrop.unload()},o.view=function(){var t,i=this,o=this.selectedFiles.length,a=this.attrs,r=a.hideUser,n=a.hideShared;return m("div",{className:"Modal modal-dialog "+this.className()},m("div",{className:"Modal-content"},m("div",{className:"fof-modal-buttons App-backControl"},!r&&"user"===this.selectedFilesLibrary&&m(L,{uploader:this.uploader,disabled:this.userFileState.isLoading(),isMediaUploadButton:!0}),e().session.user&&e().session.user.uploadSharedFiles()&&!n&&"shared"===this.selectedFilesLibrary&&m(D(),{className:"Button",icon:"fas fa-file-upload",onclick:function(){i.showUploadModal()}},e().translator.trans("fof-upload.forum.buttons.upload"))),m("div",{className:"fof-drag-and-drop"},m("div",{className:"fof-drag-and-drop-release"},m("i",{className:"fas fa-cloud-upload-alt"}),e().translator.trans("fof-upload.lib.file_list.release_to_upload"))),m("div",{className:"Modal-header"},m("h3",{className:"App-titleControl App-titleControl--text"},e().translator.trans("fof-upload.forum.media_manager")),(null==(t=e().session.user)?void 0:t.accessSharedFiles())&&!r&&!n&&m("div",{className:"LibrarySelection"},this.fileLibraryButtonItems().toArray())),this.alertAttrs&&m("div",{className:"Modal-alert"},m(Alert,this.alertAttrs)),m("div",{className:"Modal-body"},"user"===this.selectedFilesLibrary&&this.userFilesContent(),"shared"===this.selectedFilesLibrary&&this.sharedFilesContent()),m("div",{className:"Modal-footer"},m(D(),{onclick:this.hide.bind(this),className:"Button"},e().translator.trans("fof-upload.forum.buttons.cancel")),m(D(),{onclick:this.onSelect.bind(this),disabled:0===this.selectedFiles.length||!this.multiSelect&&this.selectedFiles.length>1,className:"Button Button--primary"},e().translator.trans("fof-upload.lib.file_list.confirm_selection_btn",{fileCount:o})))))},o.fileLibraryButtonItems=function(){var t=this,i=new(G());return i.add("user",m(D(),{className:"Button Button--flat "+("user"===this.selectedFilesLibrary?"active":""),onclick:function(){return t.setLibrary("user")}},e().translator.trans("fof-upload.forum.buttons.media"))),i.add("shared",m(D(),{className:"Button Button--flat "+("shared"===this.selectedFilesLibrary?"active":""),onclick:function(){return t.setLibrary("shared")}},e().translator.trans("fof-upload.forum.buttons.shared_media"))),i},o.setLibrary=function(t){this.selectedFilesLibrary=t,m.redraw()},o.userFilesContent=function(){return m(X,{user:this.attrs.user,selectable:!0,onFileSelect:this.onFileSelect.bind(this),selectedFiles:this.selectedFiles,restrictFileType:this.restrictFileType,fileState:this.userFileState,onDelete:this.onDelete.bind(this)})},o.sharedFilesContent=function(){return m(it,{selectable:!0,onFileSelect:this.onFileSelect.bind(this),selectedFiles:this.selectedFiles,restrictFileType:this.restrictFileType,user:this.attrs.user,fileState:this.sharedFileState,onDelete:this.onDelete.bind(this)})},o.onFileSelect=function(t){var e=this.selectedFiles.indexOf(t.id());e>=0?this.selectedFiles.splice(e,1):this.multiSelect?this.selectedFiles.push(t.id()):this.selectedFiles=[t.id()]},o.onUpload=function(){var t=this;this.uploader.on("success",(function(e){var i=e.file;t.multiSelect?t.selectedFiles.push(i.id()):t.selectedFiles=[i.id()]}))},o.onSelect=function(){this.hide(),this.attrs.onSelect?this.attrs.onSelect(this.selectedFiles):this.selectedFiles.map((function(t){var i=e().store.getById("files",t)||e().store.getById("shared-files",t);e().composer.editor.insertAtCursor(i.bbcode()+"\n",!1)}))},o.showUploadModal=function(){var t=this;e().modal.show(et,{onUploadComplete:function(e){t.sharedFileState.addToList(e)}},!0)},o.onDelete=function(t){this.sharedFileState.removeFromList(t),this.userFileState.removeFromList(t)},i}(M()),rt=function(t){function i(){return t.apply(this,arguments)||this}h(i,t);var o=i.prototype;return o.view=function(){return m(q(),{text:e().translator.trans("fof-upload.forum.buttons.media")},D().component({className:"Button fof-upload-button Button--icon",onclick:this.fileManagerButtonClicked.bind(this),icon:"fas fa-photo-video"}))},o.fileManagerButtonClicked=function(t){t.preventDefault(),e().modal.show(at,{uploader:this.attrs.uploader})},i}(g());const nt=flarum.core.compat["forum/components/UserPage"];var st=i.n(nt);const lt=flarum.core.compat["common/components/LinkButton"];var ut=i.n(lt);const ft=flarum.core.compat["common/extenders"];var ct=i.n(ft),dt=function(t){function e(){return t.apply(this,arguments)||this}h(e,t);var i=e.prototype;return i.baseName=function(){return s().attribute("baseName").call(this)},i.path=function(){return s().attribute("path").call(this)},i.url=function(){return s().attribute("url").call(this)},i.size=function(){return s().attribute("size").call(this)},i.type=function(){return s().attribute("type").call(this)},i.humanSize=function(){return s().attribute("humanSize").call(this)},i.createdAt=function(){return s().attribute("createdAt",s().transformDate).call(this)},i.uuid=function(){return s().attribute("uuid").call(this)},i.tag=function(){return s().attribute("tag").call(this)},i.hidden=function(){return s().attribute("hidden").call(this)},i.bbcode=function(){return s().attribute("bbcode").call(this)},i.isShared=function(){return s().attribute("shared").call(this)},i.isPrivateShared=function(){return s().attribute("isPrivateShared").call(this)},i.canViewInfo=function(){return s().attribute("canViewInfo").call(this)},i.canHide=function(){return s().attribute("canHide").call(this)},i.canDelete=function(){return s().attribute("canDelete").call(this)},i.apiEndpoint=function(){return"/fof/uploads"+(this.exists?"/"+this.id():"")},e}(s());const pt=[(new(ct().Store)).add("files",dt).add("shared-files",dt)];var ht=function(t){function i(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).fileState=void 0,e}h(i,t);var o=i.prototype;return o.oninit=function(e){t.prototype.oninit.call(this,e),this.user=null,this.fileState=new ot,this.loadUser(m.route.param("username"))},o.content=function(){return e().session.user&&(e().session.user.viewOthersMediaLibrary()||this.user===e().session.user)?this.user&&X.component({user:this.user,selectable:!1,downloadOnClick:!0,fileState:this.fileState,onDelete:this.onDelete.bind(this)}):null},o.onDelete=function(t){this.fileState.removeFromList(t)},o.show=function(e){t.prototype.show.call(this,e),this.user=e},i}(st());const mt=[].concat(pt,[(new(ct().Routes)).add("user.uploads","/u/:username/uploads",ht)]);function vt(){return vt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)({}).hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},vt.apply(null,arguments)}var gt=vt({},{UploadedFile:function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).file=void 0,e.callback=void 0,e.imageLoaded=!0,e.handleImageError=function(){e.imageLoaded=!1,m.redraw()},e.handleImageLoad=function(){e.imageLoaded=!0,m.redraw()},e}h(e,t);var i=e.prototype;return i.oninit=function(e){t.prototype.oninit.call(this,e),this.file=this.attrs.file},i.view=function(){var t=this,e=this.file.type().startsWith("image/"),i=j(this.file.type()),o=this.file.isPrivateShared()?"fas fa-lock":"fas fa-unlock";return m("div",{className:"UploadedFile",key:this.file.uuid()},m("div",{className:"UploadedFile--sharestatus"},m("span",null,H()(o),this.file.baseName())),m("div",{className:"UploadedFile--preview",onclick:function(){return t.onFileClick(t.file)}},e?this.imageLoaded?m("img",{className:this.attrs.fileClassNames,src:this.file.url(),loading:"lazy",onerror:this.handleImageError,onload:this.handleImageLoad,alt:this.file.baseName()}):H()("fas fa-exclamation-triangle",{className:"icon-fallback"}):H()(i,{className:"icon-fallback"})),m("div",{className:"UploadedFile--actions"},this.actionItems().toArray()))},i.actionItems=function(){var t=this,e=new(G());e.add("view-info",m(D(),{className:"Button Button--icon",icon:"fas fa-info-circle",onclick:function(){return t.viewFileInfo()},"aria-label":"info"})),e.add("download",m(D(),{className:"Button Button--icon",icon:"fas fa-download",onclick:function(){return window.open(t.file.url())},"aria-label":"download"}));var i=this.file.isPrivateShared()?"fas fa-lock":this.file.hidden()?"fas fa-eye":"fas fa-eye-slash";return e.add("hide-file",m(D(),{className:"Button Button--icon",icon:i,onclick:function(){return t.hideFile()},"aria-label":"hide"})),e.add("delete",m(D(),{className:"Button Button--icon",icon:"fas fa-trash",onclick:function(){return t.confirmDelete()},"aria-label":"delete"})),e},i.confirmDelete=function(){var t=T(A().mark((function t(){var e;return A().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!confirm("Are you sure you want to delete this file?")){t.next=6;break}return e=this.file.uuid(),t.next=5,C().request({method:"DELETE",url:C().forum.attribute("apiUrl")+"/fof/upload/delete/"+e});case 5:this.attrs.onDelete&&this.attrs.onDelete(this.file);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.viewFileInfo=function(){console.log("view file info")},i.hideFile=function(){console.log("hide file")},i.onFileClick=function(t){this.attrs.onFileSelect&&this.attrs.onFileSelect(t)},e}(g()),UploadSharedFileModal:et,UserFileList:X},{DragAndDrop:N,FileManagerButton:rt,FileManagerModal:at,Uploader:_,UploadButton:L});e().initializers.add("fof-upload",(function(){r().prototype.viewOthersMediaLibrary=s().attribute("fof-upload-viewOthersMediaLibrary"),r().prototype.deleteOthersMediaLibrary=s().attribute("fof-upload-deleteOthersMediaLibrary"),r().prototype.uploadCountCurrent=s().attribute("fof-upload-uploadCountCurrent"),r().prototype.uploadCountAll=s().attribute("fof-upload-uploadCountAll"),r().prototype.uploadSharedFiles=s().attribute("fof-upload-uploadSharedFiles"),r().prototype.accessSharedFiles=s().attribute("fof-upload-accessSharedFiles"),(0,l.extend)(d().prototype,"oninit",(function(){this.uploader=new _})),(0,l.extend)(d().prototype,"controlItems",(function(t){if(e().forum.attribute("fof-upload.canUpload")){var i=e().forum.attribute("fof-upload.composerButtonVisiblity");"both"!==i&&"media-btn"!==i||t.add("fof-upload-media",rt.component({uploader:this.uploader})),"both"!==i&&"upload-btn"!==i||t.add("fof-upload",L.component({uploader:this.uploader}))}})),(0,l.extend)(d().prototype,"oncreate",(function(t,i){var o=this;if(e().forum.attribute("fof-upload.canUpload")){this.uploader.on("success",(function(t){var i=t.file;if(t.addBBcode&&(o.attrs.composer.editor.insertAtCursor(i.bbcode()+"\n",!1),"function"==typeof o.attrs.preview)){var a=e().composer.isFullScreen;e().composer.isFullScreen=function(){return!1},o.attrs.preview(),e().composer.isFullScreen=a}}));var a=this.fofUploadDragAndDropTarget();a&&(this.dragAndDrop=new N((function(t){return o.uploader.upload(t)}),a)),new k((function(t){return o.uploader.upload(t)}),this.$(".TextEditor-editor")[0])}})),(0,l.extend)(d().prototype,"onremove",(function(t,i){e().forum.attribute("fof-upload.canUpload")&&this.dragAndDrop&&this.dragAndDrop.unload()})),d().prototype.fofUploadDragAndDropTarget=function(){return this.$().parents(".Composer")[0]},(0,l.extend)(f().prototype,"oncreate",(function(){var t=this;this.$("[data-fof-upload-download-uuid]").unbind("click").on("click",(function(i){if(i.preventDefault(),i.stopPropagation(),e().forum.attribute("fof-upload.canDownload")){var o=e().forum.attribute("apiUrl")+"/fof/download";o+="/"+encodeURIComponent(i.currentTarget.dataset.fofUploadDownloadUuid),o+="/"+encodeURIComponent(t.attrs.post.id()),o+="/"+encodeURIComponent(e().session.csrfToken),window.open(o)}else alert(e().translator.trans("fof-upload.forum.states.unauthorized"))}))})),(0,l.extend)(st().prototype,"navItems",(function(t){var i=!!e().forum.attribute("fof-upload.canUpload"),o=!!this.user.uploadCountCurrent();if(e().session.user&&(e().session.user.viewOthersMediaLibrary()||this.user===e().session.user&&(i||o))){var a=this.user.uploadCountCurrent();t.add("uploads",ut().component({href:e().route("user.uploads",{username:this.user.slug()}),name:"uploads",icon:"fas fa-file-upload"},[this.user===e().session.user?e().translator.trans("fof-upload.forum.buttons.media"):e().translator.trans("fof-upload.forum.buttons.user_uploads")," ",a>0?m("span",{className:"Button-badge"},a):""]),80)}}))}))})(),module.exports=o})();
//# sourceMappingURL=forum.js.map