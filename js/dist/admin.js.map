{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@fof/upload/webpack/bootstrap","webpack://@fof/upload/webpack/runtime/compat get default export","webpack://@fof/upload/webpack/runtime/define property getters","webpack://@fof/upload/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/upload/webpack/runtime/make namespace object","webpack://@fof/upload/external root \"flarum.core.compat['admin/app']\"","webpack://@fof/upload/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/upload/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/upload/external root \"flarum.core.compat['admin/utils/saveSettings']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Select']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@fof/upload/external root \"flarum.core.compat['admin/components/UploadImageButton']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/utils/withAttr']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@fof/upload/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/upload/./src/admin/components/InspectMimeModal.js","webpack://@fof/upload/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Link']\"","webpack://@fof/upload/./src/admin/components/UploadPage.js","webpack://@fof/upload/./src/admin/components/index.ts","webpack://@fof/upload/./src/admin/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/utils/saveSettings'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Alert'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Switch'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/UploadImageButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/withAttr'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","import app from 'flarum/admin/app';\nimport Modal from 'flarum/common/components/Modal';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\n\nexport default class InspectMimeModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.uploading = false;\n    this.inspection = {};\n  }\n\n  className() {\n    return 'Modal--small fof-upload-inspect-mime-modal';\n  }\n\n  title() {\n    return app.translator.trans('fof-upload.admin.inspect-mime.title');\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <p>\n          {app.translator.trans('fof-upload.admin.inspect-mime.description', {\n            a: <a href=\"https://github.com/SoftCreatR/php-mime-detector\"></a>,\n          })}\n        </p>\n        <p>{app.translator.trans('fof-upload.admin.inspect-mime.select')}</p>\n        <div>\n          <input type=\"file\" onchange={this.onupload.bind(this)} disabled={this.uploading} />\n          {this.uploading ? LoadingIndicator.component() : null}\n        </div>\n        <dl>\n          <dt>{app.translator.trans('fof-upload.admin.inspect-mime.laravel-validation')}</dt>\n          <dd>\n            {typeof this.inspection.laravel_validation === 'undefined' ? (\n              <em>{app.translator.trans('fof-upload.admin.inspect-mime.no-file-selected')}</em>\n            ) : this.inspection.laravel_validation ? (\n              app.translator.trans('fof-upload.admin.inspect-mime.validation-passed')\n            ) : (\n              app.translator.trans('fof-upload.admin.inspect-mime.validation-failed', {\n                error: this.inspection.laravel_validation_error || '?',\n              })\n            )}\n          </dd>\n        </dl>\n        <dl>\n          <dt>{app.translator.trans('fof-upload.admin.inspect-mime.mime-detector')}</dt>\n          <dd>\n            {this.inspection.mime_detector ? (\n              <code>{this.inspection.mime_detector}</code>\n            ) : (\n              <em>{app.translator.trans('fof-upload.admin.inspect-mime.not-available')}</em>\n            )}\n          </dd>\n        </dl>\n        <dl>\n          <dt>{app.translator.trans('fof-upload.admin.inspect-mime.mime-fileinfo')}</dt>\n          <dd>\n            {this.inspection.php_mime ? (\n              <code>{this.inspection.php_mime}</code>\n            ) : (\n              <em>{app.translator.trans('fof-upload.admin.inspect-mime.not-available')}</em>\n            )}\n          </dd>\n        </dl>\n        <dl>\n          <dt>{app.translator.trans('fof-upload.admin.inspect-mime.guessed-extension')}</dt>\n          <dd>\n            {this.inspection.guessed_extension ? (\n              <code>{this.inspection.guessed_extension}</code>\n            ) : (\n              <em>{app.translator.trans('fof-upload.admin.inspect-mime.not-available')}</em>\n            )}\n          </dd>\n        </dl>\n      </div>\n    );\n  }\n\n  onupload(event) {\n    const body = new FormData();\n\n    for (let i = 0; i < event.target.files.length; i++) {\n      body.append('files[]', event.target.files[i]);\n    }\n\n    this.uploading = true;\n\n    return app\n      .request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/fof/upload/inspect-mime',\n        serialize: (raw) => raw,\n        body,\n      })\n      .then((result) => {\n        this.uploading = false;\n        this.inspection = result;\n        m.redraw();\n      })\n      .catch((error) => {\n        this.uploading = false;\n        this.inspection = {};\n        m.redraw();\n\n        throw error;\n      });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","import app from 'flarum/admin/app';\nimport Button from 'flarum/common/components/Button';\nimport saveSettings from 'flarum/admin/utils/saveSettings';\nimport Alert from 'flarum/common/components/Alert';\nimport Select from 'flarum/common/components/Select';\nimport Switch from 'flarum/common/components/Switch';\nimport UploadImageButton from 'flarum/admin/components/UploadImageButton';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport Stream from 'flarum/common/utils/Stream';\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport InspectMimeModal from './InspectMimeModal';\nimport icon from 'flarum/common/helpers/icon';\nimport Link from 'flarum/common/components/Link';\n\n/* global m */\n\nexport default class UploadPage extends ExtensionPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n    // whether we are saving the settings or not right now\n    this.loading = false;\n\n    // the fields we need to watch and to save\n    this.fields = [\n      // image\n      'resizeMaxWidth',\n      'cdnUrl',\n      'maxFileSize',\n      'whitelistedClientExtensions',\n      'composerButtonVisiblity',\n      // watermark\n      'watermark',\n      'watermarkPosition',\n      // Imgur\n      'imgurClientId',\n      // AWS\n      'awsS3Key',\n      'awsS3Secret',\n      'awsS3Bucket',\n      'awsS3Region',\n      'awsS3Endpoint',\n      'awsS3ACL',\n      // QIniu\n      'qiniuKey',\n      'qiniuSecret',\n      'qiniuBucket',\n    ];\n\n    // the checkboxes we need to watch and to save.\n    this.checkboxes = ['mustResize', 'addsWatermarks', 'disableHotlinkProtection', 'disableDownloadLogging', 'awsS3UsePathStyleEndpoint'];\n\n    // fields that are objects\n    this.objects = ['mimeTypes'];\n\n    // watermark positions\n    this.watermarkPositions = {\n      'top-left': 'top-left',\n      'top-right': 'top-right',\n      'bottom-left': 'bottom-left',\n      'bottom-right': 'bottom-right',\n      center: 'center',\n      left: 'left',\n      top: 'top',\n      right: 'right',\n      bottom: 'bottom',\n    };\n\n    // Composer button options\n    this.composerButtonVisiblityOptions = {\n      both: app.translator.trans('fof-upload.admin.labels.composer_buttons.options.both'),\n      'upload-btn': app.translator.trans('fof-upload.admin.labels.composer_buttons.options.upload-btn'),\n      'media-btn': app.translator.trans('fof-upload.admin.labels.composer_buttons.options.media-btn'),\n    };\n\n    // get the saved settings from the database\n    const settings = app.data.settings;\n\n    // our package prefix (to be added to every field and checkbox in the setting table)\n    this.settingsPrefix = 'fof-upload';\n\n    // Options for the Upload methods dropdown menu.\n    this.uploadMethodOptions = settings[this.addPrefix('availableUploadMethods')] || {};\n    // Options for the Template dropdown menu.\n    this.templateOptions = settings[this.addPrefix('availableTemplates')] || {};\n    // Contains current values.\n    this.values = {};\n    // bind the values of the fields and checkboxes to the getter/setter functions\n    this.fields.forEach((key) => (this.values[key] = Stream(settings[this.addPrefix(key)])));\n    this.checkboxes.forEach((key) => (this.values[key] = Stream(settings[this.addPrefix(key)] === '1')));\n    this.objects.forEach((key) => (this.values[key] = settings[this.addPrefix(key)] ? Stream(JSON.parse(settings[this.addPrefix(key)])) : Stream()));\n\n    // Set a sane default in case no mimeTypes have been configured yet.\n    // Since 'local' (or others) can now be disabled, pick the last entry in the object for default\n    this.defaultAdap = Object.keys(this.uploadMethodOptions)[Object.keys(this.uploadMethodOptions).length - 1];\n    this.values.mimeTypes() ||\n      (this.values.mimeTypes = Stream({\n        '^image\\\\/.*': {\n          adapter: this.defaultAdap,\n          template: 'image-preview',\n        },\n      }));\n\n    this.newMimeType = {\n      regex: Stream(''),\n      adapter: Stream(this.defaultAdap),\n      template: Stream('file'),\n    };\n  }\n\n  /**\n   * Show the actual ImageUploadPage.\n   *\n   * @returns {*}\n   */\n  content() {\n    const max_post = app.data.settings[this.addPrefix('php_ini.post_max_size')];\n    const max_upload = app.data.settings[this.addPrefix('php_ini.upload_max_filesize')];\n    return [\n      m('.UploadPage', [\n        m('.container', [\n          m(\n            'form',\n            {\n              onsubmit: this.onsubmit.bind(this),\n            },\n            [\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.preferences.title')),\n                m('label', app.translator.trans('fof-upload.admin.labels.preferences.max_file_size')),\n                m('input.FormControl', {\n                  value: this.values.maxFileSize() || 2048,\n                  oninput: withAttr('value', this.values.maxFileSize),\n                  type: 'number',\n                  min: '0',\n                }),\n                m(\n                  '.helpText',\n                  app.translator.trans('fof-upload.admin.labels.preferences.php_ini_values', {\n                    post: max_post,\n                    upload: max_upload,\n                  })\n                ),\n                m('label', app.translator.trans('fof-upload.admin.labels.preferences.mime_types')),\n                m(\n                  '.MimeTypes--Container',\n                  Object.keys(this.values.mimeTypes()).map((mime) => {\n                    let config = this.values.mimeTypes()[mime];\n                    // Compatibility for older versions.\n                    if (typeof config !== 'object') {\n                      config = {\n                        adapter: config,\n                        template: 'file',\n                      };\n                    }\n\n                    return m('div', [\n                      m('input.FormControl.MimeTypes', {\n                        value: mime,\n                        oninput: withAttr('value', this.updateMimeTypeKey.bind(this, mime)),\n                      }),\n                      Select.component({\n                        options: this.uploadMethodOptions,\n                        onchange: this.updateMimeTypeAdapter.bind(this, mime, config),\n                        value: config.adapter || 'local',\n                      }),\n                      Select.component({\n                        options: this.getTemplateOptionsForInput(),\n                        onchange: this.updateMimeTypeTemplate.bind(this, mime, config),\n                        value: config.template || 'local',\n                      }),\n                      Button.component(\n                        {\n                          type: 'button',\n                          className: 'Button Button--warning',\n                          onclick: this.deleteMimeType.bind(this, mime),\n                        },\n                        'x'\n                      ),\n                    ]);\n                  }),\n                  m('br'),\n                  m('div', [\n                    m('input.FormControl.MimeTypes.add-MimeType-key', {\n                      value: this.newMimeType.regex(),\n                      oninput: withAttr('value', this.newMimeType.regex),\n                    }),\n                    Select.component({\n                      options: this.uploadMethodOptions,\n                      className: 'add-MimeType-value',\n                      oninput: withAttr('value', this.newMimeType.adapter),\n                      value: this.newMimeType.adapter(),\n                    }),\n                    Select.component({\n                      options: this.getTemplateOptionsForInput(),\n                      className: 'add-MimeType-value',\n                      oninput: withAttr('value', this.newMimeType.template),\n                      value: this.newMimeType.template(),\n                    }),\n                    Button.component(\n                      {\n                        type: 'button',\n                        className: 'Button Button--warning',\n                        onclick: this.addMimeType.bind(this),\n                      },\n                      '+'\n                    ),\n                  ])\n                ),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.mime_types')),\n                Button.component(\n                  {\n                    className: 'Button',\n                    onclick() {\n                      app.modal.show(InspectMimeModal);\n                    },\n                  },\n                  app.translator.trans('fof-upload.admin.labels.inspect-mime')\n                ),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.download_templates')),\n                this.templateOptionsDescriptions(),\n              ]),\n              m('fieldset.composerButtons', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.composer_buttons.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.composer_buttons')),\n                m('div', [\n                  Select.component({\n                    options: this.composerButtonVisiblityOptions,\n                    onchange: this.values.composerButtonVisiblity,\n                    value: this.values.composerButtonVisiblity() || 'both',\n                  }),\n                ]),\n              ]),\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.resize.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.resize')),\n                Switch.component(\n                  {\n                    state: this.values.mustResize() || false,\n                    onchange: this.values.mustResize,\n                  },\n                  app.translator.trans('fof-upload.admin.labels.resize.toggle')\n                ),\n                m('label', app.translator.trans('fof-upload.admin.labels.resize.max_width')),\n                m('input', {\n                  className: 'FormControl',\n                  value: this.values.resizeMaxWidth() || 100,\n                  oninput: withAttr('value', this.values.resizeMaxWidth),\n                  disabled: !this.values.mustResize(),\n                  type: 'number',\n                  min: '0',\n                }),\n              ]),\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.client_extension.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.client_extension')),\n                m('input', {\n                  className: 'FormControl',\n                  value: this.values.whitelistedClientExtensions() || '',\n                  oninput: withAttr('value', this.values.whitelistedClientExtensions),\n                }),\n              ]),\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.watermark.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.watermark')),\n                Switch.component(\n                  {\n                    state: this.values.addsWatermarks() || false,\n                    onchange: this.values.addsWatermarks,\n                  },\n                  app.translator.trans('fof-upload.admin.labels.watermark.toggle')\n                ),\n                m('label', app.translator.trans('fof-upload.admin.labels.watermark.position')),\n                m('div', [\n                  Select.component({\n                    options: this.watermarkPositions,\n                    onchange: this.values.watermarkPosition,\n                    value: this.values.watermarkPosition() || 'bottom-right',\n                  }),\n                ]),\n                m('label', {}, app.translator.trans('fof-upload.admin.labels.watermark.file')),\n                UploadImageButton.component({\n                  name: 'fof/watermark',\n                }),\n              ]),\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.disable-hotlink-protection.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.disable-hotlink-protection')),\n                Switch.component(\n                  {\n                    state: this.values.disableHotlinkProtection() || false,\n                    onchange: this.values.disableHotlinkProtection,\n                  },\n                  app.translator.trans('fof-upload.admin.labels.disable-hotlink-protection.toggle')\n                ),\n                m('legend', app.translator.trans('fof-upload.admin.labels.disable-download-logging.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.disable-download-logging')),\n                Switch.component(\n                  {\n                    state: this.values.disableDownloadLogging() || false,\n                    onchange: this.values.disableDownloadLogging,\n                  },\n                  app.translator.trans('fof-upload.admin.labels.disable-download-logging.toggle')\n                ),\n              ]),\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.local.title')),\n                m('label', app.translator.trans('fof-upload.admin.labels.local.cdn_url')),\n                m('input.FormControl', {\n                  value: this.values.cdnUrl() || '',\n                  oninput: withAttr('value', this.values.cdnUrl),\n                }),\n              ]),\n\n              this.adaptorItems().toArray(),\n\n              Button.component(\n                {\n                  type: 'submit',\n                  className: 'Button Button--primary',\n                  loading: this.loading,\n                  disabled: !this.changed(),\n                },\n                app.translator.trans('core.admin.settings.submit_button')\n              ),\n            ]\n          ),\n        ]),\n      ]),\n    ];\n  }\n\n  adaptorItems() {\n    const items = new ItemList();\n\n    if (this.uploadMethodOptions['imgur'] !== undefined) {\n      items.add(\n        'imgur',\n        <div className=\"imgur\">\n          <fieldset>\n            <legend>{app.translator.trans('fof-upload.admin.labels.imgur.title')}</legend>\n            <p>\n              {icon('fas fa-exclamation-circle')}{' '}\n              {app.translator.trans('fof-upload.admin.labels.imgur.tos', {\n                a: <Link href=\"https://imgur.com/tos\" external={true} target=\"_blank\" />,\n              })}\n            </p>\n            <label>{app.translator.trans('fof-upload.admin.labels.imgur.client_id')}</label>\n            <input className=\"FormControl\" value={this.values.imgurClientId() || ''} oninput={withAttr('value', this.values.imgurClientId)} />\n          </fieldset>\n        </div>,\n        100\n      );\n    }\n\n    if (this.uploadMethodOptions['qiniu'] !== undefined) {\n      items.add(\n        'qiniu',\n        m('.qiniu', [\n          m('fieldset', [\n            m('legend', app.translator.trans('fof-upload.admin.labels.qiniu.title')),\n            m('label', app.translator.trans('fof-upload.admin.labels.qiniu.key')),\n            m('input.FormControl', {\n              value: this.values.qiniuKey() || '',\n              oninput: withAttr('value', this.values.qiniuKey),\n            }),\n            m('label', {}, app.translator.trans('fof-upload.admin.labels.qiniu.secret')),\n            m('input.FormControl', {\n              value: this.values.qiniuSecret() || '',\n              oninput: withAttr('value', this.values.qiniuSecret),\n            }),\n            m('label', {}, app.translator.trans('fof-upload.admin.labels.qiniu.bucket')),\n            m('input.FormControl', {\n              value: this.values.qiniuBucket() || '',\n              oninput: withAttr('value', this.values.qiniuBucket),\n            }),\n          ]),\n        ]),\n        80\n      );\n    }\n\n    if (this.uploadMethodOptions['aws-s3'] !== undefined) {\n      items.add(\n        'aws-s3',\n        m('.aws', [\n          m('fieldset', [\n            m('legend', app.translator.trans('fof-upload.admin.labels.aws-s3.title')),\n            m('.helpText', app.translator.trans('fof-upload.admin.help_texts.s3_instance_profile')),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.key')),\n            m('input.FormControl', {\n              value: this.values.awsS3Key() || '',\n              oninput: withAttr('value', this.values.awsS3Key),\n            }),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.secret')),\n            m('input.FormControl', {\n              value: this.values.awsS3Secret() || '',\n              oninput: withAttr('value', this.values.awsS3Secret),\n            }),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.bucket')),\n            m('input.FormControl', {\n              value: this.values.awsS3Bucket() || '',\n              oninput: withAttr('value', this.values.awsS3Bucket),\n            }),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.region')),\n            m('input.FormControl', {\n              value: this.values.awsS3Region() || '',\n              oninput: withAttr('value', this.values.awsS3Region),\n            }),\n          ]),\n          m('fieldset', [\n            m('legend', app.translator.trans('fof-upload.admin.labels.aws-s3.advanced_title')),\n            m('.helpText', app.translator.trans('fof-upload.admin.help_texts.s3_compatible_storage')),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.endpoint')),\n            m('input.FormControl', {\n              value: this.values.awsS3Endpoint() || '',\n              oninput: withAttr('value', this.values.awsS3Endpoint),\n            }),\n            Switch.component(\n              {\n                state: this.values.awsS3UsePathStyleEndpoint() || false,\n                onchange: this.values.awsS3UsePathStyleEndpoint,\n              },\n              app.translator.trans('fof-upload.admin.labels.aws-s3.use_path_style_endpoint')\n            ),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.acl')),\n            m('input.FormControl', {\n              value: this.values.awsS3ACL() || '',\n              oninput: withAttr('value', this.values.awsS3ACL),\n            }),\n            m('.helpText', app.translator.trans('fof-upload.admin.help_texts.s3_acl')),\n          ]),\n        ]),\n        60\n      );\n    }\n\n    return items;\n  }\n\n  getTemplateOptionsForInput() {\n    const options = {};\n\n    for (let option in this.templateOptions) {\n      if (!this.templateOptions.hasOwnProperty(option)) {\n        continue;\n      }\n\n      options[option] = this.templateOptions[option].name;\n    }\n\n    return options;\n  }\n\n  updateMimeTypeKey(mime, value) {\n    this.values.mimeTypes()[value] = this.values.mimeTypes()[mime];\n\n    this.deleteMimeType(mime);\n  }\n\n  updateMimeTypeAdapter(mime, config, value) {\n    config.adapter = value;\n    this.values.mimeTypes()[mime] = config;\n  }\n\n  updateMimeTypeTemplate(mime, config, value) {\n    config.template = value;\n    this.values.mimeTypes()[mime] = config;\n  }\n\n  deleteMimeType(mime) {\n    delete this.values.mimeTypes()[mime];\n  }\n\n  templateOptionsDescriptions() {\n    const children = [];\n\n    for (let template in this.templateOptions) {\n      if (!this.templateOptions.hasOwnProperty(template)) {\n        continue;\n      }\n\n      children.push(\n        <li>\n          {this.templateOptions[template].name}: {m.trust(this.templateOptions[template].description)}\n        </li>\n      );\n    }\n\n    return m('ul', children);\n  }\n\n  addMimeType() {\n    this.values.mimeTypes()[this.newMimeType.regex()] = {\n      adapter: this.newMimeType.adapter(),\n      template: this.newMimeType.template(),\n    };\n\n    this.newMimeType.regex('');\n    this.newMimeType.adapter('local');\n    this.newMimeType.template('file');\n  }\n\n  /**\n   * Checks if the values of the fields and checkboxes are different from\n   * the ones stored in the database\n   *\n   * @returns boolean\n   */\n  changed() {\n    const fieldsCheck = this.fields.some((key) => this.values[key]() !== app.data.settings[this.addPrefix(key)]);\n    const checkboxesCheck = this.checkboxes.some((key) => this.values[key]() !== (app.data.settings[this.addPrefix(key)] === '1'));\n    const objectsCheck = this.objects.some((key) => JSON.stringify(this.values[key]()) !== app.data.settings[this.addPrefix(key)]);\n\n    return fieldsCheck || checkboxesCheck || objectsCheck;\n  }\n\n  /**\n   * Saves the settings to the database and redraw the page\n   *\n   * @param e\n   */\n  onsubmit(e) {\n    // prevent the usual form submit behaviour\n    e.preventDefault();\n\n    // if the page is already saving, do nothing\n    if (this.loading) return;\n\n    // prevents multiple savings\n    this.loading = true;\n\n    // remove previous success popup\n    app.alerts.dismiss(this.successAlert);\n\n    const settings = {};\n\n    // gets all the values from the form\n    this.fields.forEach((key) => (settings[this.addPrefix(key)] = this.values[key]()));\n    this.checkboxes.forEach((key) => (settings[this.addPrefix(key)] = this.values[key]()));\n    this.objects.forEach((key) => (settings[this.addPrefix(key)] = JSON.stringify(this.values[key]())));\n\n    // actually saves everything in the database\n    saveSettings(settings)\n      .then(() => {\n        // on success, show popup\n        this.successAlert = app.alerts.show(Alert, { type: 'success' }, app.translator.trans('core.admin.settings.saved_message'));\n      })\n      .catch(() => {})\n      .then(() => {\n        // return to the initial state and redraw the page\n        this.loading = false;\n        m.redraw();\n      });\n  }\n\n  /**\n   * Adds the prefix `this.settingsPrefix` at the beginning of `key`\n   *\n   * @returns string\n   */\n  addPrefix(key) {\n    return this.settingsPrefix + '.' + key;\n  }\n}\n","import UploadPage from './UploadPage';\n\nexport const components = {\n  UploadPage,\n};\n","import app from 'flarum/admin/app';\nimport UploadPage from './components/UploadPage';\n\nexport * from './components';\n\napp.initializers.add('fof-upload', () => {\n  app.extensionData\n    .for('fof-upload')\n    .registerPage(UploadPage)\n    .registerPermission(\n      {\n        icon: 'far fa-file',\n        label: app.translator.trans('fof-upload.admin.permissions.upload_label'),\n        permission: 'fof-upload.upload',\n      },\n      'start',\n      50\n    )\n    .registerPermission(\n      {\n        icon: 'fas fa-download',\n        label: app.translator.trans('fof-upload.admin.permissions.download_label'),\n        permission: 'fof-upload.download',\n        allowGuest: true,\n      },\n      'view',\n      50\n    )\n    .registerPermission(\n      {\n        icon: 'fas fa-eye',\n        label: app.translator.trans('fof-upload.admin.permissions.view_user_uploads_label'),\n        permission: 'fof-upload.viewUserUploads',\n      },\n      'moderate',\n      50\n    )\n    .registerPermission(\n      {\n        icon: 'fas fa-trash',\n        label: app.translator.trans('fof-upload.admin.permissions.delete_uploads_of_others_label'),\n        permission: 'fof-upload.deleteUserUploads',\n      },\n      'moderate',\n      50\n    );\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","create","constructor","InspectMimeModal","oninit","vnode","this","uploading","inspection","className","title","app","trans","content","href","type","onchange","onupload","bind","disabled","LoadingIndicator","laravel_validation","error","laravel_validation_error","mime_detector","php_mime","guessed_extension","event","body","FormData","i","target","files","length","append","method","url","attribute","serialize","raw","then","result","m","redraw","Modal","UploadPage","loading","fields","checkboxes","objects","watermarkPositions","center","left","top","right","bottom","composerButtonVisiblityOptions","both","settings","settingsPrefix","uploadMethodOptions","addPrefix","templateOptions","values","forEach","Stream","JSON","parse","defaultAdap","keys","mimeTypes","adapter","template","newMimeType","regex","max_post","max_upload","onsubmit","maxFileSize","oninput","withAttr","min","post","upload","map","mime","config","updateMimeTypeKey","Select","options","updateMimeTypeAdapter","getTemplateOptionsForInput","updateMimeTypeTemplate","Button","onclick","deleteMimeType","addMimeType","show","templateOptionsDescriptions","composerButtonVisiblity","Switch","state","mustResize","resizeMaxWidth","whitelistedClientExtensions","addsWatermarks","watermarkPosition","UploadImageButton","name","disableHotlinkProtection","disableDownloadLogging","cdnUrl","adaptorItems","toArray","changed","items","ItemList","undefined","add","icon","external","imgurClientId","qiniuKey","qiniuSecret","qiniuBucket","awsS3Key","awsS3Secret","awsS3Bucket","awsS3Region","awsS3Endpoint","awsS3UsePathStyleEndpoint","awsS3ACL","option","children","push","trust","description","fieldsCheck","some","checkboxesCheck","objectsCheck","stringify","e","preventDefault","dismiss","successAlert","saveSettings","Alert","ExtensionPage","components","registerPage","registerPermission","label","permission","allowGuest"],"sourceRoot":""}