{"version":3,"sources":["webpack://@fof/upload/webpack/bootstrap","webpack://@fof/upload/./admin.js","webpack://@fof/upload/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/upload/./src/admin/components/UploadPage.js","webpack://@fof/upload/./src/admin/components/index.js","webpack://@fof/upload/./src/admin/index.js","webpack://@fof/upload/external \"flarum.core.compat['app']\"","webpack://@fof/upload/external \"flarum.core.compat['components/Alert']\"","webpack://@fof/upload/external \"flarum.core.compat['components/Button']\"","webpack://@fof/upload/external \"flarum.core.compat['components/ExtensionPage']\"","webpack://@fof/upload/external \"flarum.core.compat['components/Select']\"","webpack://@fof/upload/external \"flarum.core.compat['components/Switch']\"","webpack://@fof/upload/external \"flarum.core.compat['components/UploadImageButton']\"","webpack://@fof/upload/external \"flarum.core.compat['utils/ItemList']\"","webpack://@fof/upload/external \"flarum.core.compat['utils/Stream']\"","webpack://@fof/upload/external \"flarum.core.compat['utils/saveSettings']\"","webpack://@fof/upload/external \"flarum.core.compat['utils/withAttr']\""],"names":["UploadPage","oninit","vnode","loading","fields","checkboxes","objects","watermarkPositions","center","left","top","right","bottom","composerButtonVisiblityOptions","app","translator","trans","settings","data","settingsPrefix","uploadMethodOptions","addPrefix","templateOptions","values","forEach","key","Stream","JSON","parse","defaultAdap","Object","keys","length","mimeTypes","adapter","template","newMimeType","regex","content","m","onsubmit","bind","value","maxFileSize","oninput","withAttr","type","min","map","mime","config","updateMimeTypeKey","Select","component","options","onchange","updateMimeTypeAdapter","getTemplateOptionsForInput","updateMimeTypeTemplate","Button","className","onclick","deleteMimeType","addMimeType","templateOptionsDescriptions","composerButtonVisiblity","Switch","state","mustResize","resizeMaxWidth","disabled","whitelistedClientExtensions","addsWatermarks","watermarkPosition","UploadImageButton","name","disableHotlinkProtection","disableDownloadLogging","cdnUrl","adaptorItems","toArray","changed","items","ItemList","undefined","add","imgurClientId","qiniuKey","qiniuSecret","qiniuBucket","awsS3Key","awsS3Secret","awsS3Bucket","awsS3Region","awsS3Endpoint","awsS3UsePathStyleEndpoint","awsS3ACL","option","hasOwnProperty","children","push","description","fieldsCheck","some","checkboxesCheck","objectsCheck","stringify","e","preventDefault","alerts","dismiss","successAlert","saveSettings","then","show","Alert","redraw","ExtensionPage","components","initializers","extensionData","registerPage","registerPermission","icon","label","permission","allowGuest"],"mappings":"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","file":"admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./admin.js\");\n","export * from './src/admin';\r\n","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import app from 'flarum/app';\nimport Button from 'flarum/components/Button';\nimport saveSettings from 'flarum/utils/saveSettings';\nimport Alert from 'flarum/components/Alert';\nimport Select from 'flarum/components/Select';\nimport Switch from 'flarum/components/Switch';\nimport UploadImageButton from 'flarum/components/UploadImageButton';\nimport withAttr from 'flarum/utils/withAttr';\nimport Stream from 'flarum/utils/Stream';\nimport ExtensionPage from 'flarum/components/ExtensionPage';\nimport ItemList from 'flarum/utils/ItemList';\n\n/* global m */\n\nexport default class UploadPage extends ExtensionPage {\n    oninit(vnode) {\n        super.oninit(vnode);\n        // whether we are saving the settings or not right now\n        this.loading = false;\n\n        // the fields we need to watch and to save\n        this.fields = [\n            // image\n            'resizeMaxWidth',\n            'cdnUrl',\n            'maxFileSize',\n            'whitelistedClientExtensions',\n            'composerButtonVisiblity',\n            // watermark\n            'watermark',\n            'watermarkPosition',\n            // Imgur\n            'imgurClientId',\n            // AWS\n            'awsS3Key',\n            'awsS3Secret',\n            'awsS3Bucket',\n            'awsS3Region',\n            'awsS3Endpoint',\n            'awsS3ACL',\n            // QIniu\n            'qiniuKey',\n            'qiniuSecret',\n            'qiniuBucket',\n        ];\n\n        // the checkboxes we need to watch and to save.\n        this.checkboxes = ['mustResize', 'addsWatermarks', 'disableHotlinkProtection', 'disableDownloadLogging', 'awsS3UsePathStyleEndpoint'];\n\n        // fields that are objects\n        this.objects = ['mimeTypes'];\n\n        // watermark positions\n        this.watermarkPositions = {\n            'top-left': 'top-left',\n            'top-right': 'top-right',\n            'bottom-left': 'bottom-left',\n            'bottom-right': 'bottom-right',\n            center: 'center',\n            left: 'left',\n            top: 'top',\n            right: 'right',\n            bottom: 'bottom',\n        };\n\n        // Composer button options\n        this.composerButtonVisiblityOptions = {\n            'both' : app.translator.trans('fof-upload.admin.labels.composer_buttons.options.both'), \n            'upload-btn' : app.translator.trans('fof-upload.admin.labels.composer_buttons.options.upload-btn'), \n            'media-btn' : app.translator.trans('fof-upload.admin.labels.composer_buttons.options.media-btn')\n        }\n\n        // get the saved settings from the database\n        const settings = app.data.settings;\n\n        // our package prefix (to be added to every field and checkbox in the setting table)\n        this.settingsPrefix = 'fof-upload';\n\n        // Options for the Upload methods dropdown menu.\n        this.uploadMethodOptions = settings[this.addPrefix('availableUploadMethods')] || {};\n        // Options for the Template dropdown menu.\n        this.templateOptions = settings[this.addPrefix('availableTemplates')] || {};\n        // Contains current values.\n        this.values = {};\n        // bind the values of the fields and checkboxes to the getter/setter functions\n        this.fields.forEach((key) => (this.values[key] = Stream(settings[this.addPrefix(key)])));\n        this.checkboxes.forEach((key) => (this.values[key] = Stream(settings[this.addPrefix(key)] === '1')));\n        this.objects.forEach(\n            (key) => (this.values[key] = settings[this.addPrefix(key)] ? Stream(JSON.parse(settings[this.addPrefix(key)])) : Stream())\n        );\n\n        // Set a sane default in case no mimeTypes have been configured yet.\n        // Since 'local' (or others) can now be disabled, pick the last entry in the object for default\n        this.defaultAdap = Object.keys(this.uploadMethodOptions)[Object.keys(this.uploadMethodOptions).length - 1];\n        this.values.mimeTypes() ||\n            (this.values.mimeTypes = Stream({\n                '^image\\\\/.*': {\n                    adapter: this.defaultAdap,\n                    template: 'image-preview',\n                },\n            }));\n\n        this.newMimeType = {\n            regex: Stream(''),\n            adapter: Stream(this.defaultAdap),\n            template: Stream('file'),\n        };\n    }\n\n    /**\n     * Show the actual ImageUploadPage.\n     *\n     * @returns {*}\n     */\n    content() {\n        return [\n            m('.UploadPage', [\n                m('.container', [\n                    m(\n                        'form',\n                        {\n                            onsubmit: this.onsubmit.bind(this),\n                        },\n                        [\n                            m('fieldset', [\n                                m('legend', app.translator.trans('fof-upload.admin.labels.preferences.title')),\n                                m('label', app.translator.trans('fof-upload.admin.labels.preferences.max_file_size')),\n                                m('input.FormControl', {\n                                    value: this.values.maxFileSize() || 2048,\n                                    oninput: withAttr('value', this.values.maxFileSize),\n                                    type: 'number',\n                                    min: '0',\n                                }),\n                                m('label', app.translator.trans('fof-upload.admin.labels.preferences.mime_types')),\n                                m(\n                                    '.MimeTypes--Container',\n                                    Object.keys(this.values.mimeTypes()).map((mime) => {\n                                        let config = this.values.mimeTypes()[mime];\n                                        // Compatibility for older versions.\n                                        if (typeof config !== 'object') {\n                                            config = {\n                                                adapter: config,\n                                                template: 'file',\n                                            };\n                                        }\n\n                                        return m('div', [\n                                            m('input.FormControl.MimeTypes', {\n                                                value: mime,\n                                                oninput: withAttr('value', this.updateMimeTypeKey.bind(this, mime)),\n                                            }),\n                                            Select.component({\n                                                options: this.uploadMethodOptions,\n                                                onchange: this.updateMimeTypeAdapter.bind(this, mime, config),\n                                                value: config.adapter || 'local',\n                                            }),\n                                            Select.component({\n                                                options: this.getTemplateOptionsForInput(),\n                                                onchange: this.updateMimeTypeTemplate.bind(this, mime, config),\n                                                value: config.template || 'local',\n                                            }),\n                                            Button.component(\n                                                {\n                                                    type: 'button',\n                                                    className: 'Button Button--warning',\n                                                    onclick: this.deleteMimeType.bind(this, mime),\n                                                },\n                                                'x'\n                                            ),\n                                        ]);\n                                    }),\n                                    m('br'),\n                                    m('div', [\n                                        m('input.FormControl.MimeTypes.add-MimeType-key', {\n                                            value: this.newMimeType.regex(),\n                                            oninput: withAttr('value', this.newMimeType.regex),\n                                        }),\n                                        Select.component({\n                                            options: this.uploadMethodOptions,\n                                            className: 'add-MimeType-value',\n                                            oninput: withAttr('value', this.newMimeType.adapter),\n                                            value: this.newMimeType.adapter(),\n                                        }),\n                                        Select.component({\n                                            options: this.getTemplateOptionsForInput(),\n                                            className: 'add-MimeType-value',\n                                            oninput: withAttr('value', this.newMimeType.template),\n                                            value: this.newMimeType.template(),\n                                        }),\n                                        Button.component(\n                                            {\n                                                type: 'button',\n                                                className: 'Button Button--warning',\n                                                onclick: this.addMimeType.bind(this),\n                                            },\n                                            '+'\n                                        ),\n                                    ])\n                                ),\n                                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.mime_types')),\n                                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.download_templates')),\n                                this.templateOptionsDescriptions(),\n                            ]),\n                            m('fieldset', [\n                                m('legend', app.translator.trans('fof-upload.admin.labels.composer_buttons.title')),\n                                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.composer_buttons')),\n                                m('div', [\n                                    Select.component({\n                                        options: this.composerButtonVisiblityOptions,\n                                        onchange: this.values.composerButtonVisiblity,\n                                        value: this.values.composerButtonVisiblity() || 'both',\n                                    }),\n                                ])\n                            ]),\n                            m('fieldset', [\n                                m('legend', app.translator.trans('fof-upload.admin.labels.resize.title')),\n                                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.resize')),\n                                Switch.component(\n                                    {\n                                        state: this.values.mustResize() || false,\n                                        onchange: this.values.mustResize,\n                                    },\n                                    app.translator.trans('fof-upload.admin.labels.resize.toggle')\n                                ),\n                                m('label', app.translator.trans('fof-upload.admin.labels.resize.max_width')),\n                                m('input', {\n                                    className: 'FormControl',\n                                    value: this.values.resizeMaxWidth() || 100,\n                                    oninput: withAttr('value', this.values.resizeMaxWidth),\n                                    disabled: !this.values.mustResize(),\n                                    type: 'number',\n                                    min: '0',\n                                }),\n                            ]),\n                            m('fieldset', [\n                                m('legend', app.translator.trans('fof-upload.admin.labels.client_extension.title')),\n                                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.client_extension')),\n                                m('input', {\n                                    className: 'FormControl',\n                                    value: this.values.whitelistedClientExtensions() || '',\n                                    oninput: withAttr('value', this.values.whitelistedClientExtensions),\n                                }),\n                            ]),\n                            m('fieldset', [\n                                m('legend', app.translator.trans('fof-upload.admin.labels.watermark.title')),\n                                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.watermark')),\n                                Switch.component(\n                                    {\n                                        state: this.values.addsWatermarks() || false,\n                                        onchange: this.values.addsWatermarks,\n                                    },\n                                    app.translator.trans('fof-upload.admin.labels.watermark.toggle')\n                                ),\n                                m('label', app.translator.trans('fof-upload.admin.labels.watermark.position')),\n                                m('div', [\n                                    Select.component({\n                                        options: this.watermarkPositions,\n                                        onchange: this.values.watermarkPosition,\n                                        value: this.values.watermarkPosition() || 'bottom-right',\n                                    }),\n                                ]),\n                                m('label', {}, app.translator.trans('fof-upload.admin.labels.watermark.file')),\n                                UploadImageButton.component({\n                                    name: 'fof/watermark',\n                                }),\n                            ]),\n                            m('fieldset', [\n                                m('legend', app.translator.trans('fof-upload.admin.labels.disable-hotlink-protection.title')),\n                                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.disable-hotlink-protection')),\n                                Switch.component(\n                                    {\n                                        state: this.values.disableHotlinkProtection() || false,\n                                        onchange: this.values.disableHotlinkProtection,\n                                    },\n                                    app.translator.trans('fof-upload.admin.labels.disable-hotlink-protection.toggle')\n                                ),\n                                m('legend', app.translator.trans('fof-upload.admin.labels.disable-download-logging.title')),\n                                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.disable-download-logging')),\n                                Switch.component(\n                                    {\n                                        state: this.values.disableDownloadLogging() || false,\n                                        onchange: this.values.disableDownloadLogging,\n                                    },\n                                    app.translator.trans('fof-upload.admin.labels.disable-download-logging.toggle')\n                                ),\n                            ]),\n                            m('fieldset', [\n                                m('legend', app.translator.trans('fof-upload.admin.labels.local.title')),\n                                m('label', app.translator.trans('fof-upload.admin.labels.local.cdn_url')),\n                                m('input.FormControl', {\n                                    value: this.values.cdnUrl() || '',\n                                    oninput: withAttr('value', this.values.cdnUrl),\n                                }),\n                            ]),\n\n                            this.adaptorItems().toArray(),\n\n                            Button.component(\n                                {\n                                    type: 'submit',\n                                    className: 'Button Button--primary',\n                                    loading: this.loading,\n                                    disabled: !this.changed(),\n                                },\n                                app.translator.trans('fof-upload.admin.buttons.save')\n                            ),\n                        ]\n                    ),\n                ]),\n            ]),\n        ];\n    }\n\n    adaptorItems() {\n        const items = new ItemList();\n\n        if (this.uploadMethodOptions['imgur'] !== undefined) {\n            items.add(\n                'imgur',\n                m('.imgur', [\n                    m('fieldset', [\n                        m('legend', app.translator.trans('fof-upload.admin.labels.imgur.title')),\n                        m('label', app.translator.trans('fof-upload.admin.labels.imgur.client_id')),\n                        m('input.FormControl', {\n                            value: this.values.imgurClientId() || '',\n                            oninput: withAttr('value', this.values.imgurClientId),\n                        }),\n                    ]),\n                ])\n            );\n        }\n\n        if (this.uploadMethodOptions['qiniu'] !== undefined) {\n            items.add(\n                'qiniu',\n                m('.qiniu', [\n                    m('fieldset', [\n                        m('legend', app.translator.trans('fof-upload.admin.labels.qiniu.title')),\n                        m('label', app.translator.trans('fof-upload.admin.labels.qiniu.key')),\n                        m('input.FormControl', {\n                            value: this.values.qiniuKey() || '',\n                            oninput: withAttr('value', this.values.qiniuKey),\n                        }),\n                        m('label', {}, app.translator.trans('fof-upload.admin.labels.qiniu.secret')),\n                        m('input.FormControl', {\n                            value: this.values.qiniuSecret() || '',\n                            oninput: withAttr('value', this.values.qiniuSecret),\n                        }),\n                        m('label', {}, app.translator.trans('fof-upload.admin.labels.qiniu.bucket')),\n                        m('input.FormControl', {\n                            value: this.values.qiniuBucket() || '',\n                            oninput: withAttr('value', this.values.qiniuBucket),\n                        }),\n                    ]),\n                ])\n            );\n        }\n\n        if (this.uploadMethodOptions['aws-s3'] !== undefined) {\n            items.add(\n                'aws-s3',\n                m('.aws', [\n                    m('fieldset', [\n                        m('legend', app.translator.trans('fof-upload.admin.labels.aws-s3.title')),\n                        m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.key')),\n                        m('input.FormControl', {\n                            value: this.values.awsS3Key() || '',\n                            oninput: withAttr('value', this.values.awsS3Key),\n                        }),\n                        m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.secret')),\n                        m('input.FormControl', {\n                            value: this.values.awsS3Secret() || '',\n                            oninput: withAttr('value', this.values.awsS3Secret),\n                        }),\n                        m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.bucket')),\n                        m('input.FormControl', {\n                            value: this.values.awsS3Bucket() || '',\n                            oninput: withAttr('value', this.values.awsS3Bucket),\n                        }),\n                        m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.region')),\n                        m('input.FormControl', {\n                            value: this.values.awsS3Region() || '',\n                            oninput: withAttr('value', this.values.awsS3Region),\n                        }),\n                    ]),\n                    m('fieldset', [\n                        m('legend', app.translator.trans('fof-upload.admin.labels.aws-s3.advanced_title')),\n                        m('.helpText', app.translator.trans('fof-upload.admin.help_texts.s3_compatible_storage')),\n                        m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.endpoint')),\n                        m('input.FormControl', {\n                            value: this.values.awsS3Endpoint() || '',\n                            oninput: withAttr('value', this.values.awsS3Endpoint),\n                        }),\n                        Switch.component(\n                            {\n                                state: this.values.awsS3UsePathStyleEndpoint() || false,\n                                onchange: this.values.awsS3UsePathStyleEndpoint,\n                            },\n                            app.translator.trans('fof-upload.admin.labels.aws-s3.use_path_style_endpoint')\n                        ),\n                        m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.acl')),\n                        m('input.FormControl', {\n                            value: this.values.awsS3ACL() || '',\n                            oninput: withAttr('value', this.values.awsS3ACL),\n                        }),\n                        m('.helpText', app.translator.trans('fof-upload.admin.help_texts.s3_acl')),\n                    ]),\n                ])\n            );\n        }\n\n        return items;\n    }\n\n    getTemplateOptionsForInput() {\n        const options = {};\n\n        for (let option in this.templateOptions) {\n            if (!this.templateOptions.hasOwnProperty(option)) {\n                continue;\n            }\n\n            options[option] = this.templateOptions[option].name;\n        }\n\n        return options;\n    }\n\n    updateMimeTypeKey(mime, value) {\n        this.values.mimeTypes()[value] = this.values.mimeTypes()[mime];\n\n        this.deleteMimeType(mime);\n    }\n\n    updateMimeTypeAdapter(mime, config, value) {\n        config.adapter = value;\n        this.values.mimeTypes()[mime] = config;\n    }\n\n    updateMimeTypeTemplate(mime, config, value) {\n        config.template = value;\n        this.values.mimeTypes()[mime] = config;\n    }\n\n    deleteMimeType(mime) {\n        delete this.values.mimeTypes()[mime];\n    }\n\n    templateOptionsDescriptions() {\n        const children = [];\n\n        for (let template in this.templateOptions) {\n            if (!this.templateOptions.hasOwnProperty(template)) {\n                continue;\n            }\n\n            children.push(m('li', this.templateOptions[template].name + ': ' + this.templateOptions[template].description));\n        }\n\n        return m('ul', children);\n    }\n\n    addMimeType() {\n        this.values.mimeTypes()[this.newMimeType.regex()] = {\n            adapter: this.newMimeType.adapter(),\n            template: this.newMimeType.template(),\n        };\n\n        this.newMimeType.regex('');\n        this.newMimeType.adapter('local');\n        this.newMimeType.template('file');\n    }\n\n    /**\n     * Checks if the values of the fields and checkboxes are different from\n     * the ones stored in the database\n     *\n     * @returns boolean\n     */\n    changed() {\n        const fieldsCheck = this.fields.some((key) => this.values[key]() !== app.data.settings[this.addPrefix(key)]);\n        const checkboxesCheck = this.checkboxes.some((key) => this.values[key]() !== (app.data.settings[this.addPrefix(key)] === '1'));\n        const objectsCheck = this.objects.some((key) => JSON.stringify(this.values[key]()) !== app.data.settings[this.addPrefix(key)]);\n\n        return fieldsCheck || checkboxesCheck || objectsCheck;\n    }\n\n    /**\n     * Saves the settings to the database and redraw the page\n     *\n     * @param e\n     */\n    onsubmit(e) {\n        // prevent the usual form submit behaviour\n        e.preventDefault();\n\n        // if the page is already saving, do nothing\n        if (this.loading) return;\n\n        // prevents multiple savings\n        this.loading = true;\n\n        // remove previous success popup\n        app.alerts.dismiss(this.successAlert);\n\n        const settings = {};\n\n        // gets all the values from the form\n        this.fields.forEach((key) => (settings[this.addPrefix(key)] = this.values[key]()));\n        this.checkboxes.forEach((key) => (settings[this.addPrefix(key)] = this.values[key]()));\n        this.objects.forEach((key) => (settings[this.addPrefix(key)] = JSON.stringify(this.values[key]())));\n\n        // actually saves everything in the database\n        saveSettings(settings)\n            .then(() => {\n                // on success, show popup\n                this.successAlert = app.alerts.show(Alert, { type: 'success' }, app.translator.trans('core.admin.basics.saved_message'));\n            })\n            .catch(() => {})\n            .then(() => {\n                // return to the initial state and redraw the page\n                this.loading = false;\n                m.redraw();\n            });\n    }\n\n    /**\n     * Adds the prefix `this.settingsPrefix` at the beginning of `key`\n     *\n     * @returns string\n     */\n    addPrefix(key) {\n        return this.settingsPrefix + '.' + key;\n    }\n}\n","import UploadPage from './UploadPage';\n\nexport const components = {\n    UploadPage,\n};\n","import app from 'flarum/app';\nimport UploadPage from './components/UploadPage';\n\nexport * from './components';\n\napp.initializers.add('fof-upload', (app) => {\n    app.extensionData\n        .for('fof-upload')\n        .registerPage(UploadPage)\n        .registerPermission(\n            {\n                icon: 'far fa-file',\n                label: app.translator.trans('fof-upload.admin.permissions.upload_label'),\n                permission: 'fof-upload.upload',\n            },\n            'start',\n            50\n        )\n        .registerPermission(\n            {\n                icon: 'fas fa-download',\n                label: app.translator.trans('fof-upload.admin.permissions.download_label'),\n                permission: 'fof-upload.download',\n                allowGuest: true,\n            },\n            'view',\n            50\n        );\n});\n","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/Alert'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/ExtensionPage'];","module.exports = flarum.core.compat['components/Select'];","module.exports = flarum.core.compat['components/Switch'];","module.exports = flarum.core.compat['components/UploadImageButton'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/Stream'];","module.exports = flarum.core.compat['utils/saveSettings'];","module.exports = flarum.core.compat['utils/withAttr'];"],"sourceRoot":""}