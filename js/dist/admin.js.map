{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@fof/upload/webpack/bootstrap","webpack://@fof/upload/webpack/runtime/compat get default export","webpack://@fof/upload/webpack/runtime/define property getters","webpack://@fof/upload/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/upload/webpack/runtime/make namespace object","webpack://@fof/upload/external root \"flarum.core.compat['admin/app']\"","webpack://@fof/upload/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/upload/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/upload/external root \"flarum.core.compat['admin/utils/saveSettings']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Select']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@fof/upload/external root \"flarum.core.compat['admin/components/UploadImageButton']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/utils/withAttr']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@fof/upload/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/upload/./src/admin/components/InspectMimeModal.js","webpack://@fof/upload/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Link']\"","webpack://@fof/upload/./src/admin/components/UploadPage.js","webpack://@fof/upload/./src/admin/components/index.ts","webpack://@fof/upload/./src/admin/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/utils/saveSettings'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Alert'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Switch'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/UploadImageButton'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/withAttr'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/Stream'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/ItemList'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Modal'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","import app from 'flarum/admin/app';\nimport Modal from 'flarum/common/components/Modal';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\n\nexport default class InspectMimeModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.uploading = false;\n    this.inspection = {};\n  }\n\n  className() {\n    return 'Modal--small fof-upload-inspect-mime-modal';\n  }\n\n  title() {\n    return app.translator.trans('fof-upload.admin.inspect-mime.title');\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <p>\n          {app.translator.trans('fof-upload.admin.inspect-mime.description', {\n            a: <a href=\"https://github.com/SoftCreatR/php-mime-detector\"></a>,\n          })}\n        </p>\n        <p>{app.translator.trans('fof-upload.admin.inspect-mime.select')}</p>\n        <div>\n          <input type=\"file\" onchange={this.onupload.bind(this)} disabled={this.uploading} />\n          {this.uploading ? LoadingIndicator.component() : null}\n        </div>\n        <dl>\n          <dt>{app.translator.trans('fof-upload.admin.inspect-mime.laravel-validation')}</dt>\n          <dd>\n            {typeof this.inspection.laravel_validation === 'undefined' ? (\n              <em>{app.translator.trans('fof-upload.admin.inspect-mime.no-file-selected')}</em>\n            ) : this.inspection.laravel_validation ? (\n              app.translator.trans('fof-upload.admin.inspect-mime.validation-passed')\n            ) : (\n              app.translator.trans('fof-upload.admin.inspect-mime.validation-failed', {\n                error: this.inspection.laravel_validation_error || '?',\n              })\n            )}\n          </dd>\n        </dl>\n        <dl>\n          <dt>{app.translator.trans('fof-upload.admin.inspect-mime.mime-detector')}</dt>\n          <dd>\n            {this.inspection.mime_detector ? (\n              <code>{this.inspection.mime_detector}</code>\n            ) : (\n              <em>{app.translator.trans('fof-upload.admin.inspect-mime.not-available')}</em>\n            )}\n          </dd>\n        </dl>\n        <dl>\n          <dt>{app.translator.trans('fof-upload.admin.inspect-mime.mime-fileinfo')}</dt>\n          <dd>\n            {this.inspection.php_mime ? (\n              <code>{this.inspection.php_mime}</code>\n            ) : (\n              <em>{app.translator.trans('fof-upload.admin.inspect-mime.not-available')}</em>\n            )}\n          </dd>\n        </dl>\n        <dl>\n          <dt>{app.translator.trans('fof-upload.admin.inspect-mime.guessed-extension')}</dt>\n          <dd>\n            {this.inspection.guessed_extension ? (\n              <code>{this.inspection.guessed_extension}</code>\n            ) : (\n              <em>{app.translator.trans('fof-upload.admin.inspect-mime.not-available')}</em>\n            )}\n          </dd>\n        </dl>\n      </div>\n    );\n  }\n\n  onupload(event) {\n    const body = new FormData();\n\n    for (let i = 0; i < event.target.files.length; i++) {\n      body.append('files[]', event.target.files[i]);\n    }\n\n    this.uploading = true;\n\n    return app\n      .request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/fof/upload/inspect-mime',\n        serialize: (raw) => raw,\n        body,\n      })\n      .then((result) => {\n        this.uploading = false;\n        this.inspection = result;\n        m.redraw();\n      })\n      .catch((error) => {\n        this.uploading = false;\n        this.inspection = {};\n        m.redraw();\n\n        throw error;\n      });\n  }\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Link'];","import app from 'flarum/admin/app';\nimport Button from 'flarum/common/components/Button';\nimport saveSettings from 'flarum/admin/utils/saveSettings';\nimport Alert from 'flarum/common/components/Alert';\nimport Select from 'flarum/common/components/Select';\nimport Switch from 'flarum/common/components/Switch';\nimport UploadImageButton from 'flarum/admin/components/UploadImageButton';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport Stream from 'flarum/common/utils/Stream';\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport InspectMimeModal from './InspectMimeModal';\nimport icon from 'flarum/common/helpers/icon';\nimport Link from 'flarum/common/components/Link';\n\n/* global m */\n\nexport default class UploadPage extends ExtensionPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n    // whether we are saving the settings or not right now\n    this.loading = false;\n\n    // the fields we need to watch and to save\n    this.fields = [\n      // image\n      'resizeMaxWidth',\n      'cdnUrl',\n      'maxFileSize',\n      'whitelistedClientExtensions',\n      'composerButtonVisiblity',\n      // watermark\n      'watermark',\n      'watermarkPosition',\n      // Imgur\n      'imgurClientId',\n      // AWS\n      'awsS3Key',\n      'awsS3Secret',\n      'awsS3Bucket',\n      'awsS3Region',\n      'awsS3Endpoint',\n      'awsS3ACL',\n      // QIniu\n      'qiniuKey',\n      'qiniuSecret',\n      'qiniuBucket',\n    ];\n\n    // the checkboxes we need to watch and to save.\n    this.checkboxes = ['mustResize', 'addsWatermarks', 'disableHotlinkProtection', 'disableDownloadLogging', 'awsS3UsePathStyleEndpoint'];\n\n    // fields that are objects\n    this.objects = ['mimeTypes'];\n\n    // watermark positions\n    this.watermarkPositions = {\n      'top-left': 'top-left',\n      'top-right': 'top-right',\n      'bottom-left': 'bottom-left',\n      'bottom-right': 'bottom-right',\n      center: 'center',\n      left: 'left',\n      top: 'top',\n      right: 'right',\n      bottom: 'bottom',\n    };\n\n    // Composer button options\n    this.composerButtonVisiblityOptions = {\n      both: app.translator.trans('fof-upload.admin.labels.composer_buttons.options.both'),\n      'upload-btn': app.translator.trans('fof-upload.admin.labels.composer_buttons.options.upload-btn'),\n      'media-btn': app.translator.trans('fof-upload.admin.labels.composer_buttons.options.media-btn'),\n    };\n\n    // get the saved settings from the database\n    const settings = app.data.settings;\n\n    // our package prefix (to be added to every field and checkbox in the setting table)\n    this.settingsPrefix = 'fof-upload';\n\n    // Options for the Upload methods dropdown menu.\n    this.uploadMethodOptions = settings[this.addPrefix('availableUploadMethods')] || {};\n    // Options for the Template dropdown menu.\n    this.templateOptions = settings[this.addPrefix('availableTemplates')] || {};\n    // Contains current values.\n    this.values = {};\n    // bind the values of the fields and checkboxes to the getter/setter functions\n    this.fields.forEach((key) => (this.values[key] = Stream(settings[this.addPrefix(key)])));\n    this.checkboxes.forEach((key) => (this.values[key] = Stream(settings[this.addPrefix(key)] === '1')));\n    this.objects.forEach((key) => (this.values[key] = settings[this.addPrefix(key)] ? Stream(JSON.parse(settings[this.addPrefix(key)])) : Stream()));\n\n    // Set a sane default in case no mimeTypes have been configured yet.\n    // Since 'local' (or others) can now be disabled, pick the last entry in the object for default\n    this.defaultAdap = Object.keys(this.uploadMethodOptions)[Object.keys(this.uploadMethodOptions).length - 1];\n    this.values.mimeTypes() ||\n      (this.values.mimeTypes = Stream({\n        '^image\\\\/.*': {\n          adapter: this.defaultAdap,\n          template: 'image-preview',\n        },\n      }));\n\n    this.newMimeType = {\n      regex: Stream(''),\n      adapter: Stream(this.defaultAdap),\n      template: Stream('file'),\n    };\n  }\n\n  /**\n   * Show the actual ImageUploadPage.\n   *\n   * @returns {*}\n   */\n  content() {\n    const max_post = app.data.settings[this.addPrefix('php_ini.post_max_size')];\n    const max_upload = app.data.settings[this.addPrefix('php_ini.upload_max_filesize')];\n    return [\n      m('.UploadPage', [\n        m('.container', [\n          m(\n            'form',\n            {\n              onsubmit: this.onsubmit.bind(this),\n            },\n            [\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.preferences.title')),\n                m('label', app.translator.trans('fof-upload.admin.labels.preferences.max_file_size')),\n                m('input.FormControl', {\n                  value: this.values.maxFileSize() || 2048,\n                  oninput: withAttr('value', this.values.maxFileSize),\n                  type: 'number',\n                  min: '0',\n                }),\n                m(\n                  '.helpText',\n                  app.translator.trans('fof-upload.admin.labels.preferences.php_ini_values', {\n                    post: max_post,\n                    upload: max_upload,\n                  })\n                ),\n                m('label', app.translator.trans('fof-upload.admin.labels.preferences.mime_types')),\n                m(\n                  '.MimeTypes--Container',\n                  Object.keys(this.values.mimeTypes()).map((mime) => {\n                    let config = this.values.mimeTypes()[mime];\n                    // Compatibility for older versions.\n                    if (typeof config !== 'object') {\n                      config = {\n                        adapter: config,\n                        template: 'file',\n                      };\n                    }\n\n                    return m('div', [\n                      m('input.FormControl.MimeTypes', {\n                        value: mime,\n                        oninput: withAttr('value', this.updateMimeTypeKey.bind(this, mime)),\n                      }),\n                      Select.component({\n                        options: this.uploadMethodOptions,\n                        onchange: this.updateMimeTypeAdapter.bind(this, mime, config),\n                        value: config.adapter || 'local',\n                      }),\n                      Select.component({\n                        options: this.getTemplateOptionsForInput(),\n                        onchange: this.updateMimeTypeTemplate.bind(this, mime, config),\n                        value: config.template || 'local',\n                      }),\n                      Button.component(\n                        {\n                          type: 'button',\n                          className: 'Button Button--warning',\n                          onclick: this.deleteMimeType.bind(this, mime),\n                        },\n                        'x'\n                      ),\n                    ]);\n                  }),\n                  m('br'),\n                  m('div', [\n                    m('input.FormControl.MimeTypes.add-MimeType-key', {\n                      value: this.newMimeType.regex(),\n                      oninput: withAttr('value', this.newMimeType.regex),\n                    }),\n                    Select.component({\n                      options: this.uploadMethodOptions,\n                      className: 'add-MimeType-value',\n                      oninput: withAttr('value', this.newMimeType.adapter),\n                      value: this.newMimeType.adapter(),\n                    }),\n                    Select.component({\n                      options: this.getTemplateOptionsForInput(),\n                      className: 'add-MimeType-value',\n                      oninput: withAttr('value', this.newMimeType.template),\n                      value: this.newMimeType.template(),\n                    }),\n                    Button.component(\n                      {\n                        type: 'button',\n                        className: 'Button Button--warning',\n                        onclick: this.addMimeType.bind(this),\n                      },\n                      '+'\n                    ),\n                  ])\n                ),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.mime_types')),\n                Button.component(\n                  {\n                    className: 'Button',\n                    onclick() {\n                      app.modal.show(InspectMimeModal);\n                    },\n                  },\n                  app.translator.trans('fof-upload.admin.labels.inspect-mime')\n                ),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.download_templates')),\n                this.templateOptionsDescriptions(),\n              ]),\n              m('fieldset.composerButtons', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.composer_buttons.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.composer_buttons')),\n                m('div', [\n                  Select.component({\n                    options: this.composerButtonVisiblityOptions,\n                    onchange: this.values.composerButtonVisiblity,\n                    value: this.values.composerButtonVisiblity() || 'both',\n                  }),\n                ]),\n              ]),\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.resize.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.resize')),\n                Switch.component(\n                  {\n                    state: this.values.mustResize() || false,\n                    onchange: this.values.mustResize,\n                  },\n                  app.translator.trans('fof-upload.admin.labels.resize.toggle')\n                ),\n                m('label', app.translator.trans('fof-upload.admin.labels.resize.max_width')),\n                m('input', {\n                  className: 'FormControl',\n                  value: this.values.resizeMaxWidth() || 100,\n                  oninput: withAttr('value', this.values.resizeMaxWidth),\n                  disabled: !this.values.mustResize(),\n                  type: 'number',\n                  min: '0',\n                }),\n              ]),\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.client_extension.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.client_extension')),\n                m('input', {\n                  className: 'FormControl',\n                  value: this.values.whitelistedClientExtensions() || '',\n                  oninput: withAttr('value', this.values.whitelistedClientExtensions),\n                }),\n              ]),\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.watermark.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.watermark')),\n                Switch.component(\n                  {\n                    state: this.values.addsWatermarks() || false,\n                    onchange: this.values.addsWatermarks,\n                  },\n                  app.translator.trans('fof-upload.admin.labels.watermark.toggle')\n                ),\n                m('label', app.translator.trans('fof-upload.admin.labels.watermark.position')),\n                m('div', [\n                  Select.component({\n                    options: this.watermarkPositions,\n                    onchange: this.values.watermarkPosition,\n                    value: this.values.watermarkPosition() || 'bottom-right',\n                  }),\n                ]),\n                m('label', {}, app.translator.trans('fof-upload.admin.labels.watermark.file')),\n                UploadImageButton.component({\n                  name: 'fof/watermark',\n                }),\n              ]),\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.disable-hotlink-protection.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.disable-hotlink-protection')),\n                Switch.component(\n                  {\n                    state: this.values.disableHotlinkProtection() || false,\n                    onchange: this.values.disableHotlinkProtection,\n                  },\n                  app.translator.trans('fof-upload.admin.labels.disable-hotlink-protection.toggle')\n                ),\n                m('legend', app.translator.trans('fof-upload.admin.labels.disable-download-logging.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.disable-download-logging')),\n                Switch.component(\n                  {\n                    state: this.values.disableDownloadLogging() || false,\n                    onchange: this.values.disableDownloadLogging,\n                  },\n                  app.translator.trans('fof-upload.admin.labels.disable-download-logging.toggle')\n                ),\n              ]),\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.local.title')),\n                m('label', app.translator.trans('fof-upload.admin.labels.local.cdn_url')),\n                m('input.FormControl', {\n                  value: this.values.cdnUrl() || '',\n                  oninput: withAttr('value', this.values.cdnUrl),\n                }),\n              ]),\n\n              this.adaptorItems().toArray(),\n\n              Button.component(\n                {\n                  type: 'submit',\n                  className: 'Button Button--primary',\n                  loading: this.loading,\n                  disabled: !this.changed(),\n                },\n                app.translator.trans('core.admin.settings.submit_button')\n              ),\n            ]\n          ),\n        ]),\n      ]),\n    ];\n  }\n\n  adaptorItems() {\n    const items = new ItemList();\n\n    if (this.uploadMethodOptions['imgur'] !== undefined) {\n      items.add(\n        'imgur',\n        <div className=\"imgur\">\n          <fieldset>\n            <legend>{app.translator.trans('fof-upload.admin.labels.imgur.title')}</legend>\n            <p>\n              {icon('fas fa-exclamation-circle')}{' '}\n              {app.translator.trans('fof-upload.admin.labels.imgur.tos', {\n                a: <Link href=\"https://imgur.com/tos\" external={true} target=\"_blank\" />,\n              })}\n            </p>\n            <label>{app.translator.trans('fof-upload.admin.labels.imgur.client_id')}</label>\n            <input className=\"FormControl\" value={this.values.imgurClientId() || ''} oninput={withAttr('value', this.values.imgurClientId)} />\n          </fieldset>\n        </div>,\n        100\n      );\n    }\n\n    if (this.uploadMethodOptions['qiniu'] !== undefined) {\n      items.add(\n        'qiniu',\n        m('.qiniu', [\n          m('fieldset', [\n            m('legend', app.translator.trans('fof-upload.admin.labels.qiniu.title')),\n            m('label', app.translator.trans('fof-upload.admin.labels.qiniu.key')),\n            m('input.FormControl', {\n              value: this.values.qiniuKey() || '',\n              oninput: withAttr('value', this.values.qiniuKey),\n            }),\n            m('label', {}, app.translator.trans('fof-upload.admin.labels.qiniu.secret')),\n            m('input.FormControl', {\n              value: this.values.qiniuSecret() || '',\n              oninput: withAttr('value', this.values.qiniuSecret),\n            }),\n            m('label', {}, app.translator.trans('fof-upload.admin.labels.qiniu.bucket')),\n            m('input.FormControl', {\n              value: this.values.qiniuBucket() || '',\n              oninput: withAttr('value', this.values.qiniuBucket),\n            }),\n          ]),\n        ]),\n        80\n      );\n    }\n\n    if (this.uploadMethodOptions['aws-s3'] !== undefined) {\n      items.add(\n        'aws-s3',\n        m('.aws', [\n          m('fieldset', [\n            m('legend', app.translator.trans('fof-upload.admin.labels.aws-s3.title')),\n            m('.helpText', app.translator.trans('fof-upload.admin.help_texts.s3_instance_profile')),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.key')),\n            m('input.FormControl', {\n              value: this.values.awsS3Key() || '',\n              oninput: withAttr('value', this.values.awsS3Key),\n            }),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.secret')),\n            m('input.FormControl', {\n              value: this.values.awsS3Secret() || '',\n              oninput: withAttr('value', this.values.awsS3Secret),\n            }),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.bucket')),\n            m('input.FormControl', {\n              value: this.values.awsS3Bucket() || '',\n              oninput: withAttr('value', this.values.awsS3Bucket),\n            }),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.region')),\n            m('input.FormControl', {\n              value: this.values.awsS3Region() || '',\n              oninput: withAttr('value', this.values.awsS3Region),\n            }),\n          ]),\n          m('fieldset', [\n            m('legend', app.translator.trans('fof-upload.admin.labels.aws-s3.advanced_title')),\n            m('.helpText', app.translator.trans('fof-upload.admin.help_texts.s3_compatible_storage')),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.endpoint')),\n            m('input.FormControl', {\n              value: this.values.awsS3Endpoint() || '',\n              oninput: withAttr('value', this.values.awsS3Endpoint),\n            }),\n            Switch.component(\n              {\n                state: this.values.awsS3UsePathStyleEndpoint() || false,\n                onchange: this.values.awsS3UsePathStyleEndpoint,\n              },\n              app.translator.trans('fof-upload.admin.labels.aws-s3.use_path_style_endpoint')\n            ),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.acl')),\n            m('input.FormControl', {\n              value: this.values.awsS3ACL() || '',\n              oninput: withAttr('value', this.values.awsS3ACL),\n            }),\n            m('.helpText', app.translator.trans('fof-upload.admin.help_texts.s3_acl')),\n          ]),\n        ]),\n        60\n      );\n    }\n\n    return items;\n  }\n\n  getTemplateOptionsForInput() {\n    const options = {};\n\n    for (let option in this.templateOptions) {\n      if (!this.templateOptions.hasOwnProperty(option)) {\n        continue;\n      }\n\n      options[option] = this.templateOptions[option].name;\n    }\n\n    return options;\n  }\n\n  updateMimeTypeKey(mime, value) {\n    this.values.mimeTypes()[value] = this.values.mimeTypes()[mime];\n\n    this.deleteMimeType(mime);\n  }\n\n  updateMimeTypeAdapter(mime, config, value) {\n    config.adapter = value;\n    this.values.mimeTypes()[mime] = config;\n  }\n\n  updateMimeTypeTemplate(mime, config, value) {\n    config.template = value;\n    this.values.mimeTypes()[mime] = config;\n  }\n\n  deleteMimeType(mime) {\n    delete this.values.mimeTypes()[mime];\n  }\n\n  templateOptionsDescriptions() {\n    const children = [];\n\n    for (let template in this.templateOptions) {\n      if (!this.templateOptions.hasOwnProperty(template)) {\n        continue;\n      }\n\n      children.push(\n        <li>\n          {this.templateOptions[template].name}: {m.trust(this.templateOptions[template].description)}\n        </li>\n      );\n    }\n\n    return m('ul', children);\n  }\n\n  addMimeType() {\n    this.values.mimeTypes()[this.newMimeType.regex()] = {\n      adapter: this.newMimeType.adapter(),\n      template: this.newMimeType.template(),\n    };\n\n    this.newMimeType.regex('');\n    this.newMimeType.adapter('local');\n    this.newMimeType.template('file');\n  }\n\n  /**\n   * Checks if the values of the fields and checkboxes are different from\n   * the ones stored in the database\n   *\n   * @returns boolean\n   */\n  changed() {\n    const fieldsCheck = this.fields.some((key) => this.values[key]() !== app.data.settings[this.addPrefix(key)]);\n    const checkboxesCheck = this.checkboxes.some((key) => this.values[key]() !== (app.data.settings[this.addPrefix(key)] === '1'));\n    const objectsCheck = this.objects.some((key) => JSON.stringify(this.values[key]()) !== app.data.settings[this.addPrefix(key)]);\n\n    return fieldsCheck || checkboxesCheck || objectsCheck;\n  }\n\n  /**\n   * Saves the settings to the database and redraw the page\n   *\n   * @param e\n   */\n  onsubmit(e) {\n    // prevent the usual form submit behaviour\n    e.preventDefault();\n\n    // if the page is already saving, do nothing\n    if (this.loading) return;\n\n    // prevents multiple savings\n    this.loading = true;\n\n    // remove previous success popup\n    app.alerts.dismiss(this.successAlert);\n\n    const settings = {};\n\n    // gets all the values from the form\n    this.fields.forEach((key) => (settings[this.addPrefix(key)] = this.values[key]()));\n    this.checkboxes.forEach((key) => (settings[this.addPrefix(key)] = this.values[key]()));\n    this.objects.forEach((key) => (settings[this.addPrefix(key)] = JSON.stringify(this.values[key]())));\n\n    // actually saves everything in the database\n    saveSettings(settings)\n      .then(() => {\n        // on success, show popup\n        this.successAlert = app.alerts.show(Alert, { type: 'success' }, app.translator.trans('core.admin.settings.saved_message'));\n      })\n      .catch(() => {})\n      .then(() => {\n        // return to the initial state and redraw the page\n        this.loading = false;\n        m.redraw();\n      });\n  }\n\n  /**\n   * Adds the prefix `this.settingsPrefix` at the beginning of `key`\n   *\n   * @returns string\n   */\n  addPrefix(key) {\n    return this.settingsPrefix + '.' + key;\n  }\n}\n","import UploadPage from './UploadPage';\n\nexport const components = {\n  UploadPage,\n};\n","import app from 'flarum/admin/app';\nimport UploadPage from './components/UploadPage';\n\nexport * from './components';\n\napp.initializers.add('fof-upload', () => {\n  app.extensionData\n    .for('fof-upload')\n    .registerPage(UploadPage)\n    .registerPermission(\n      {\n        icon: 'far fa-file',\n        label: app.translator.trans('fof-upload.admin.permissions.upload_label'),\n        permission: 'fof-upload.upload',\n      },\n      'start',\n      50\n    )\n    .registerPermission(\n      {\n        icon: 'fas fa-download',\n        label: app.translator.trans('fof-upload.admin.permissions.download_label'),\n        permission: 'fof-upload.download',\n        allowGuest: true,\n      },\n      'view',\n      50\n    )\n    .registerPermission(\n      {\n        icon: 'fas fa-eye',\n        label: app.translator.trans('fof-upload.admin.permissions.view_user_uploads_label'),\n        permission: 'fof-upload.viewUserUploads',\n      },\n      'moderate',\n      50\n    )\n    .registerPermission(\n      {\n        icon: 'fas fa-trash',\n        label: app.translator.trans('fof-upload.admin.permissions.delete_uploads_of_others_label'),\n        permission: 'fof-upload.deleteUserUploads',\n      },\n      'moderate',\n      50\n    );\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","__proto__","_inheritsLoose","subClass","superClass","create","constructor","InspectMimeModal","_Modal","apply","arguments","_proto","oninit","vnode","this","uploading","inspection","className","title","app","trans","content","m","href","type","onchange","onupload","bind","disabled","LoadingIndicator","laravel_validation","error","laravel_validation_error","mime_detector","php_mime","guessed_extension","event","_this","body","FormData","i","target","files","length","append","method","url","attribute","serialize","raw","then","result","redraw","Modal","UploadPage","_ExtensionPage","loading","fields","checkboxes","objects","watermarkPositions","center","left","top","right","bottom","composerButtonVisiblityOptions","both","settings","settingsPrefix","uploadMethodOptions","addPrefix","templateOptions","values","forEach","Stream","JSON","parse","defaultAdap","keys","mimeTypes","adapter","template","newMimeType","regex","_this2","max_post","max_upload","onsubmit","maxFileSize","oninput","withAttr","min","post","upload","map","mime","config","updateMimeTypeKey","Select","options","updateMimeTypeAdapter","getTemplateOptionsForInput","updateMimeTypeTemplate","Button","onclick","deleteMimeType","addMimeType","show","templateOptionsDescriptions","composerButtonVisiblity","Switch","state","mustResize","resizeMaxWidth","whitelistedClientExtensions","addsWatermarks","watermarkPosition","UploadImageButton","name","disableHotlinkProtection","disableDownloadLogging","cdnUrl","adaptorItems","toArray","changed","items","ItemList","undefined","add","icon","Link","external","imgurClientId","qiniuKey","qiniuSecret","qiniuBucket","awsS3Key","awsS3Secret","awsS3Bucket","awsS3Region","awsS3Endpoint","awsS3UsePathStyleEndpoint","awsS3ACL","option","children","push","trust","description","_this3","fieldsCheck","some","checkboxesCheck","objectsCheck","stringify","e","_this4","preventDefault","dismiss","successAlert","saveSettings","Alert","ExtensionPage","components","registerPage","registerPermission","label","permission","allowGuest"],"sourceRoot":""}