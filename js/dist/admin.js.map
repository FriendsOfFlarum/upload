{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@fof/upload/./node_modules/@babel/runtime/regenerator/index.js","webpack://@fof/upload/./node_modules/regenerator-runtime/runtime.js","webpack://@fof/upload/./src/admin/components/InspectMimeModal.js","webpack://@fof/upload/./src/admin/components/SharedUploadPage.tsx","webpack://@fof/upload/./src/admin/components/UploadPage.js","webpack://@fof/upload/./src/admin/components/index.ts","webpack://@fof/upload/./src/admin/extend.ts","webpack://@fof/upload/./src/admin/extendAdminNav.tsx","webpack://@fof/upload/./src/admin/index.ts","webpack://@fof/upload/./src/common/components/AbstractFIleList.tsx","webpack://@fof/upload/./src/common/components/DisplayFile.tsx","webpack://@fof/upload/./src/common/components/SharedFileList.tsx","webpack://@fof/upload/./src/common/components/UploadSharedFileModal.tsx","webpack://@fof/upload/./src/common/components/UploadedFile.tsx","webpack://@fof/upload/./src/common/components/UserFileList.tsx","webpack://@fof/upload/./src/common/components/index.ts","webpack://@fof/upload/./src/common/extend.ts","webpack://@fof/upload/./src/common/mimeToIcon.ts","webpack://@fof/upload/./src/common/models/File.ts","webpack://@fof/upload/./src/common/states/FileListState.ts","webpack://@fof/upload/external root \"flarum.core.compat['admin/app']\"","webpack://@fof/upload/external root \"flarum.core.compat['admin/components/AdminNav']\"","webpack://@fof/upload/external root \"flarum.core.compat['admin/components/AdminPage']\"","webpack://@fof/upload/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@fof/upload/external root \"flarum.core.compat['admin/components/UploadImageButton']\"","webpack://@fof/upload/external root \"flarum.core.compat['admin/utils/saveSettings']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/Component']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/Model']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/app']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Alert']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Button']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Link']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Modal']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Select']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/components/Tooltip']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/extend']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/extenders']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/utils/ItemList']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/utils/Stream']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/utils/classList']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@fof/upload/external root \"flarum.core.compat['common/utils/withAttr']\"","webpack://@fof/upload/./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","webpack://@fof/upload/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@fof/upload/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@fof/upload/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@fof/upload/webpack/bootstrap","webpack://@fof/upload/webpack/runtime/compat get default export","webpack://@fof/upload/webpack/runtime/define property getters","webpack://@fof/upload/webpack/runtime/hasOwnProperty shorthand","webpack://@fof/upload/webpack/runtime/make namespace object","webpack://@fof/upload/./admin.js"],"sourcesContent":["module.exports = require(\"regenerator-runtime\");\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","import app from 'flarum/admin/app';\nimport Modal from 'flarum/common/components/Modal';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\n\nexport default class InspectMimeModal extends Modal {\n  oninit(vnode) {\n    super.oninit(vnode);\n\n    this.uploading = false;\n    this.inspection = {};\n  }\n\n  className() {\n    return 'Modal--small fof-upload-inspect-mime-modal';\n  }\n\n  title() {\n    return app.translator.trans('fof-upload.admin.inspect-mime.title');\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <p>\n          {app.translator.trans('fof-upload.admin.inspect-mime.description', {\n            a: <a href=\"https://github.com/SoftCreatR/php-mime-detector\"></a>,\n          })}\n        </p>\n        <p>{app.translator.trans('fof-upload.admin.inspect-mime.select')}</p>\n        <div>\n          <input type=\"file\" onchange={this.onupload.bind(this)} disabled={this.uploading} />\n          {this.uploading ? LoadingIndicator.component() : null}\n        </div>\n        <dl>\n          <dt>{app.translator.trans('fof-upload.admin.inspect-mime.laravel-validation')}</dt>\n          <dd>\n            {typeof this.inspection.laravel_validation === 'undefined' ? (\n              <em>{app.translator.trans('fof-upload.admin.inspect-mime.no-file-selected')}</em>\n            ) : this.inspection.laravel_validation ? (\n              app.translator.trans('fof-upload.admin.inspect-mime.validation-passed')\n            ) : (\n              app.translator.trans('fof-upload.admin.inspect-mime.validation-failed', {\n                error: this.inspection.laravel_validation_error || '?',\n              })\n            )}\n          </dd>\n        </dl>\n        <dl>\n          <dt>{app.translator.trans('fof-upload.admin.inspect-mime.mime-detector')}</dt>\n          <dd>\n            {this.inspection.mime_detector ? (\n              <code>{this.inspection.mime_detector}</code>\n            ) : (\n              <em>{app.translator.trans('fof-upload.admin.inspect-mime.not-available')}</em>\n            )}\n          </dd>\n        </dl>\n        <dl>\n          <dt>{app.translator.trans('fof-upload.admin.inspect-mime.mime-fileinfo')}</dt>\n          <dd>\n            {this.inspection.php_mime ? (\n              <code>{this.inspection.php_mime}</code>\n            ) : (\n              <em>{app.translator.trans('fof-upload.admin.inspect-mime.not-available')}</em>\n            )}\n          </dd>\n        </dl>\n        <dl>\n          <dt>{app.translator.trans('fof-upload.admin.inspect-mime.guessed-extension')}</dt>\n          <dd>\n            {this.inspection.guessed_extension ? (\n              <code>{this.inspection.guessed_extension}</code>\n            ) : (\n              <em>{app.translator.trans('fof-upload.admin.inspect-mime.not-available')}</em>\n            )}\n          </dd>\n        </dl>\n      </div>\n    );\n  }\n\n  onupload(event) {\n    const body = new FormData();\n\n    for (let i = 0; i < event.target.files.length; i++) {\n      body.append('files[]', event.target.files[i]);\n    }\n\n    this.uploading = true;\n\n    return app\n      .request({\n        method: 'POST',\n        url: app.forum.attribute('apiUrl') + '/fof/upload/inspect-mime',\n        serialize: (raw) => raw,\n        body,\n      })\n      .then((result) => {\n        this.uploading = false;\n        this.inspection = result;\n        m.redraw();\n      })\n      .catch((error) => {\n        this.uploading = false;\n        this.inspection = {};\n        m.redraw();\n\n        throw error;\n      });\n  }\n}\n","import app from 'flarum/admin/app';\nimport AdminPage, { AdminHeaderAttrs } from 'flarum/admin/components/AdminPage';\nimport Button from 'flarum/common/components/Button';\nimport { IPageAttrs } from 'flarum/common/components/Page';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport type Mithril from 'mithril';\nimport UploadSharedFileModal from '../../common/components/UploadSharedFileModal';\nimport File from 'src/common/models/File';\nimport SharedFileList from '../../common/components/SharedFileList';\nimport FileListState from '../../common/states/FileListState';\n\nexport default class SharedUploadPage<CustomAttrs extends IPageAttrs = IPageAttrs> extends AdminPage<CustomAttrs> {\n  sharedUploads: File[] = [];\n  currentPage: number = 1;\n  fileState!: FileListState;\n\n  oninit(vnode: Mithril.Vnode<CustomAttrs, this>) {\n    super.oninit(vnode);\n\n    this.fileState = new FileListState(true);\n  }\n\n  headerInfo(): AdminHeaderAttrs {\n    return {\n      className: 'SharedUploadPage--header',\n      icon: 'fas fa-file-upload',\n      title: app.translator.trans('fof-upload.admin.shared-uploads.title'),\n      description: app.translator.trans('fof-upload.admin.shared-uploads.description'),\n    };\n  }\n\n  content(): Mithril.Children {\n    return (\n      <div className=\"SharedUploadPage--content\">\n        <p className=\"helpText\">{app.translator.trans('fof-upload.admin.shared-uploads.introduction')}</p>\n        <hr />\n        <div className=\"SharedUploadPage--main-actions\">{this.mainActionItems().toArray()}</div>\n        <hr />\n        <div className=\"SharedUploadPage--uploads\">\n          <SharedFileList user={app.session.user} selectable={false} fileState={this.fileState} onDelete={this.onDelete.bind(this)} />\n        </div>\n      </div>\n    );\n  }\n\n  showUploadModal() {\n    app.modal.show(UploadSharedFileModal, {\n      onUploadComplete: (files: File | File[]) => {\n        this.uploadComplete(files);\n      },\n    });\n  }\n\n  mainActionItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add('refresh', <Button className=\"Button Button--icon\" icon=\"fas fa-sync\" onclick={() => this.refresh()} />);\n\n    items.add(\n      'upload-new',\n      <Button className=\"Button\" icon=\"fas fa-upload\" onclick={() => this.showUploadModal()}>\n        {app.translator.trans('fof-upload.admin.shared-uploads.upload-new-button')}\n      </Button>\n    );\n\n    return items;\n  }\n\n  fileActionItems(file: File): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    return items;\n  }\n\n  uploadComplete(files: File | File[]) {\n    console.log('upload complete', files);\n    this.fileState.addToList(files);\n  }\n\n  refresh() {\n    this.fileState.refresh();\n  }\n\n  onDelete(file: File) {\n    this.fileState.removeFromList(file);\n  }\n}\n","import app from 'flarum/admin/app';\nimport Button from 'flarum/common/components/Button';\nimport saveSettings from 'flarum/admin/utils/saveSettings';\nimport Alert from 'flarum/common/components/Alert';\nimport Select from 'flarum/common/components/Select';\nimport Switch from 'flarum/common/components/Switch';\nimport UploadImageButton from 'flarum/admin/components/UploadImageButton';\nimport withAttr from 'flarum/common/utils/withAttr';\nimport Stream from 'flarum/common/utils/Stream';\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport InspectMimeModal from './InspectMimeModal';\nimport icon from 'flarum/common/helpers/icon';\nimport Link from 'flarum/common/components/Link';\n\n/* global m */\n\nexport default class UploadPage extends ExtensionPage {\n  oninit(vnode) {\n    super.oninit(vnode);\n    // whether we are saving the settings or not right now\n    this.loading = false;\n\n    // the fields we need to watch and to save\n    this.fields = [\n      // image\n      'resizeMaxWidth',\n      'cdnUrl',\n      'maxFileSize',\n      'whitelistedClientExtensions',\n      'composerButtonVisiblity',\n      // watermark\n      'watermark',\n      'watermarkPosition',\n      // Imgur\n      'imgurClientId',\n      // AWS\n      'awsS3Key',\n      'awsS3Secret',\n      'awsS3Bucket',\n      'awsS3Region',\n      'awsS3Endpoint',\n      'awsS3ACL',\n      // QIniu\n      'qiniuKey',\n      'qiniuSecret',\n      'qiniuBucket',\n    ];\n\n    // the checkboxes we need to watch and to save.\n    this.checkboxes = ['mustResize', 'addsWatermarks', 'disableHotlinkProtection', 'disableDownloadLogging', 'awsS3UsePathStyleEndpoint'];\n\n    // fields that are objects\n    this.objects = ['mimeTypes'];\n\n    // watermark positions\n    this.watermarkPositions = {\n      'top-left': 'top-left',\n      'top-right': 'top-right',\n      'bottom-left': 'bottom-left',\n      'bottom-right': 'bottom-right',\n      center: 'center',\n      left: 'left',\n      top: 'top',\n      right: 'right',\n      bottom: 'bottom',\n    };\n\n    // Composer button options\n    this.composerButtonVisiblityOptions = {\n      both: app.translator.trans('fof-upload.admin.labels.composer_buttons.options.both'),\n      'upload-btn': app.translator.trans('fof-upload.admin.labels.composer_buttons.options.upload-btn'),\n      'media-btn': app.translator.trans('fof-upload.admin.labels.composer_buttons.options.media-btn'),\n    };\n\n    // get the saved settings from the database\n    const settings = app.data.settings;\n\n    // our package prefix (to be added to every field and checkbox in the setting table)\n    this.settingsPrefix = 'fof-upload';\n\n    // Options for the Upload methods dropdown menu.\n    this.uploadMethodOptions = settings[this.addPrefix('availableUploadMethods')] || {};\n    // Options for the Template dropdown menu.\n    this.templateOptions = settings[this.addPrefix('availableTemplates')] || {};\n    // Contains current values.\n    this.values = {};\n    // bind the values of the fields and checkboxes to the getter/setter functions\n    this.fields.forEach((key) => (this.values[key] = Stream(settings[this.addPrefix(key)])));\n    this.checkboxes.forEach((key) => (this.values[key] = Stream(settings[this.addPrefix(key)] === '1')));\n    this.objects.forEach((key) => (this.values[key] = settings[this.addPrefix(key)] ? Stream(JSON.parse(settings[this.addPrefix(key)])) : Stream()));\n\n    // Set a sane default in case no mimeTypes have been configured yet.\n    // Since 'local' (or others) can now be disabled, pick the last entry in the object for default\n    this.defaultAdap = Object.keys(this.uploadMethodOptions)[Object.keys(this.uploadMethodOptions).length - 1];\n    this.values.mimeTypes() ||\n      (this.values.mimeTypes = Stream({\n        '^image\\\\/.*': {\n          adapter: this.defaultAdap,\n          template: 'image-preview',\n        },\n      }));\n\n    this.newMimeType = {\n      regex: Stream(''),\n      adapter: Stream(this.defaultAdap),\n      template: Stream('file'),\n    };\n  }\n\n  /**\n   * Show the actual ImageUploadPage.\n   *\n   * @returns {*}\n   */\n  content() {\n    const max_post = app.data.settings[this.addPrefix('php_ini.post_max_size')];\n    const max_upload = app.data.settings[this.addPrefix('php_ini.upload_max_filesize')];\n    return [\n      m('.UploadPage', [\n        m('.container', [\n          m(\n            'form',\n            {\n              onsubmit: this.onsubmit.bind(this),\n            },\n            [\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.preferences.title')),\n                m('label', app.translator.trans('fof-upload.admin.labels.preferences.max_file_size')),\n                m('input.FormControl', {\n                  value: this.values.maxFileSize(),\n                  oninput: withAttr('value', this.values.maxFileSize),\n                  type: 'number',\n                  min: '0',\n                }),\n                m(\n                  '.helpText',\n                  app.translator.trans('fof-upload.admin.labels.preferences.php_ini_values', {\n                    post: max_post,\n                    upload: max_upload,\n                  })\n                ),\n                m('label', app.translator.trans('fof-upload.admin.labels.preferences.mime_types')),\n                m(\n                  '.MimeTypes--Container',\n                  Object.keys(this.values.mimeTypes()).map((mime) => {\n                    let config = this.values.mimeTypes()[mime];\n                    // Compatibility for older versions.\n                    if (typeof config !== 'object') {\n                      config = {\n                        adapter: config,\n                        template: 'file',\n                      };\n                    }\n\n                    return m('div', [\n                      m('input.FormControl.MimeTypes', {\n                        value: mime,\n                        oninput: withAttr('value', this.updateMimeTypeKey.bind(this, mime)),\n                      }),\n                      Select.component({\n                        options: this.uploadMethodOptions,\n                        onchange: this.updateMimeTypeAdapter.bind(this, mime, config),\n                        value: config.adapter || 'local',\n                      }),\n                      Select.component({\n                        options: this.getTemplateOptionsForInput(),\n                        onchange: this.updateMimeTypeTemplate.bind(this, mime, config),\n                        value: config.template || 'local',\n                      }),\n                      Button.component(\n                        {\n                          type: 'button',\n                          className: 'Button Button--warning',\n                          onclick: this.deleteMimeType.bind(this, mime),\n                        },\n                        'x'\n                      ),\n                    ]);\n                  }),\n                  m('br'),\n                  m('div', [\n                    m('input.FormControl.MimeTypes.add-MimeType-key', {\n                      value: this.newMimeType.regex(),\n                      oninput: withAttr('value', this.newMimeType.regex),\n                    }),\n                    Select.component({\n                      options: this.uploadMethodOptions,\n                      className: 'add-MimeType-value',\n                      oninput: withAttr('value', this.newMimeType.adapter),\n                      value: this.newMimeType.adapter(),\n                    }),\n                    Select.component({\n                      options: this.getTemplateOptionsForInput(),\n                      className: 'add-MimeType-value',\n                      oninput: withAttr('value', this.newMimeType.template),\n                      value: this.newMimeType.template(),\n                    }),\n                    Button.component(\n                      {\n                        type: 'button',\n                        className: 'Button Button--warning',\n                        onclick: this.addMimeType.bind(this),\n                      },\n                      '+'\n                    ),\n                  ])\n                ),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.mime_types')),\n                Button.component(\n                  {\n                    className: 'Button',\n                    onclick() {\n                      app.modal.show(InspectMimeModal);\n                    },\n                  },\n                  app.translator.trans('fof-upload.admin.labels.inspect-mime')\n                ),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.download_templates')),\n                this.templateOptionsDescriptions(),\n              ]),\n              m('fieldset.composerButtons', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.composer_buttons.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.composer_buttons')),\n                m('div', [\n                  Select.component({\n                    options: this.composerButtonVisiblityOptions,\n                    onchange: this.values.composerButtonVisiblity,\n                    value: this.values.composerButtonVisiblity() || 'both',\n                  }),\n                ]),\n              ]),\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.resize.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.resize')),\n                Switch.component(\n                  {\n                    state: this.values.mustResize() || false,\n                    onchange: this.values.mustResize,\n                  },\n                  app.translator.trans('fof-upload.admin.labels.resize.toggle')\n                ),\n                m('label', app.translator.trans('fof-upload.admin.labels.resize.max_width')),\n                m('input', {\n                  className: 'FormControl',\n                  value: this.values.resizeMaxWidth() || 100,\n                  oninput: withAttr('value', this.values.resizeMaxWidth),\n                  disabled: !this.values.mustResize(),\n                  type: 'number',\n                  min: '0',\n                }),\n              ]),\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.client_extension.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.client_extension')),\n                m('input', {\n                  className: 'FormControl',\n                  value: this.values.whitelistedClientExtensions() || '',\n                  oninput: withAttr('value', this.values.whitelistedClientExtensions),\n                }),\n              ]),\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.watermark.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.watermark')),\n                Switch.component(\n                  {\n                    state: this.values.addsWatermarks() || false,\n                    onchange: this.values.addsWatermarks,\n                  },\n                  app.translator.trans('fof-upload.admin.labels.watermark.toggle')\n                ),\n                m('label', app.translator.trans('fof-upload.admin.labels.watermark.position')),\n                m('div', [\n                  Select.component({\n                    options: this.watermarkPositions,\n                    onchange: this.values.watermarkPosition,\n                    value: this.values.watermarkPosition() || 'bottom-right',\n                  }),\n                ]),\n                m('label', {}, app.translator.trans('fof-upload.admin.labels.watermark.file')),\n                UploadImageButton.component({\n                  name: 'fof/watermark',\n                }),\n              ]),\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.disable-hotlink-protection.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.disable-hotlink-protection')),\n                Switch.component(\n                  {\n                    state: this.values.disableHotlinkProtection() || false,\n                    onchange: this.values.disableHotlinkProtection,\n                  },\n                  app.translator.trans('fof-upload.admin.labels.disable-hotlink-protection.toggle')\n                ),\n                m('legend', app.translator.trans('fof-upload.admin.labels.disable-download-logging.title')),\n                m('.helpText', app.translator.trans('fof-upload.admin.help_texts.disable-download-logging')),\n                Switch.component(\n                  {\n                    state: this.values.disableDownloadLogging() || false,\n                    onchange: this.values.disableDownloadLogging,\n                  },\n                  app.translator.trans('fof-upload.admin.labels.disable-download-logging.toggle')\n                ),\n              ]),\n              m('fieldset', [\n                m('legend', app.translator.trans('fof-upload.admin.labels.local.title')),\n                m('label', app.translator.trans('fof-upload.admin.labels.local.cdn_url')),\n                m('input.FormControl', {\n                  value: this.values.cdnUrl() || '',\n                  oninput: withAttr('value', this.values.cdnUrl),\n                }),\n              ]),\n\n              this.adaptorItems().toArray(),\n\n              Button.component(\n                {\n                  type: 'submit',\n                  className: 'Button Button--primary',\n                  loading: this.loading,\n                  disabled: !this.changed(),\n                },\n                app.translator.trans('core.admin.settings.submit_button')\n              ),\n            ]\n          ),\n        ]),\n      ]),\n    ];\n  }\n\n  adaptorItems() {\n    const items = new ItemList();\n\n    if (this.uploadMethodOptions['imgur'] !== undefined) {\n      items.add(\n        'imgur',\n        <div className=\"imgur\">\n          <fieldset>\n            <legend>{app.translator.trans('fof-upload.admin.labels.imgur.title')}</legend>\n            <p>\n              {icon('fas fa-exclamation-circle')}{' '}\n              {app.translator.trans('fof-upload.admin.labels.imgur.tos', {\n                a: <Link href=\"https://imgur.com/tos\" external={true} target=\"_blank\" />,\n              })}\n            </p>\n            <label>{app.translator.trans('fof-upload.admin.labels.imgur.client_id')}</label>\n            <input className=\"FormControl\" value={this.values.imgurClientId() || ''} oninput={withAttr('value', this.values.imgurClientId)} />\n          </fieldset>\n        </div>,\n        100\n      );\n    }\n\n    if (this.uploadMethodOptions['qiniu'] !== undefined) {\n      items.add(\n        'qiniu',\n        m('.qiniu', [\n          m('fieldset', [\n            m('legend', app.translator.trans('fof-upload.admin.labels.qiniu.title')),\n            m('label', app.translator.trans('fof-upload.admin.labels.qiniu.key')),\n            m('input.FormControl', {\n              value: this.values.qiniuKey() || '',\n              oninput: withAttr('value', this.values.qiniuKey),\n            }),\n            m('label', {}, app.translator.trans('fof-upload.admin.labels.qiniu.secret')),\n            m('input.FormControl', {\n              value: this.values.qiniuSecret() || '',\n              oninput: withAttr('value', this.values.qiniuSecret),\n            }),\n            m('label', {}, app.translator.trans('fof-upload.admin.labels.qiniu.bucket')),\n            m('input.FormControl', {\n              value: this.values.qiniuBucket() || '',\n              oninput: withAttr('value', this.values.qiniuBucket),\n            }),\n          ]),\n        ]),\n        80\n      );\n    }\n\n    if (this.uploadMethodOptions['aws-s3'] !== undefined) {\n      items.add(\n        'aws-s3',\n        m('.aws', [\n          m('fieldset', [\n            m('legend', app.translator.trans('fof-upload.admin.labels.aws-s3.title')),\n            m('.helpText', app.translator.trans('fof-upload.admin.help_texts.s3_instance_profile')),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.key')),\n            m('input.FormControl', {\n              value: this.values.awsS3Key() || '',\n              oninput: withAttr('value', this.values.awsS3Key),\n            }),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.secret')),\n            m('input.FormControl', {\n              value: this.values.awsS3Secret() || '',\n              oninput: withAttr('value', this.values.awsS3Secret),\n            }),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.bucket')),\n            m('input.FormControl', {\n              value: this.values.awsS3Bucket() || '',\n              oninput: withAttr('value', this.values.awsS3Bucket),\n            }),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.region')),\n            m('input.FormControl', {\n              value: this.values.awsS3Region() || '',\n              oninput: withAttr('value', this.values.awsS3Region),\n            }),\n          ]),\n          m('fieldset', [\n            m('legend', app.translator.trans('fof-upload.admin.labels.aws-s3.advanced_title')),\n            m('.helpText', app.translator.trans('fof-upload.admin.help_texts.s3_compatible_storage')),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.endpoint')),\n            m('input.FormControl', {\n              value: this.values.awsS3Endpoint() || '',\n              oninput: withAttr('value', this.values.awsS3Endpoint),\n            }),\n            Switch.component(\n              {\n                state: this.values.awsS3UsePathStyleEndpoint() || false,\n                onchange: this.values.awsS3UsePathStyleEndpoint,\n              },\n              app.translator.trans('fof-upload.admin.labels.aws-s3.use_path_style_endpoint')\n            ),\n            m('label', app.translator.trans('fof-upload.admin.labels.aws-s3.acl')),\n            m('input.FormControl', {\n              value: this.values.awsS3ACL() || '',\n              oninput: withAttr('value', this.values.awsS3ACL),\n            }),\n            m('.helpText', app.translator.trans('fof-upload.admin.help_texts.s3_acl')),\n          ]),\n        ]),\n        60\n      );\n    }\n\n    return items;\n  }\n\n  getTemplateOptionsForInput() {\n    const options = {};\n\n    for (let option in this.templateOptions) {\n      if (!this.templateOptions.hasOwnProperty(option)) {\n        continue;\n      }\n\n      options[option] = this.templateOptions[option].name;\n    }\n\n    return options;\n  }\n\n  updateMimeTypeKey(mime, value) {\n    this.values.mimeTypes()[value] = this.values.mimeTypes()[mime];\n\n    this.deleteMimeType(mime);\n  }\n\n  updateMimeTypeAdapter(mime, config, value) {\n    config.adapter = value;\n    this.values.mimeTypes()[mime] = config;\n  }\n\n  updateMimeTypeTemplate(mime, config, value) {\n    config.template = value;\n    this.values.mimeTypes()[mime] = config;\n  }\n\n  deleteMimeType(mime) {\n    delete this.values.mimeTypes()[mime];\n  }\n\n  templateOptionsDescriptions() {\n    const children = [];\n\n    for (let template in this.templateOptions) {\n      if (!this.templateOptions.hasOwnProperty(template)) {\n        continue;\n      }\n\n      children.push(\n        <li>\n          {this.templateOptions[template].name}: {m.trust(this.templateOptions[template].description)}\n        </li>\n      );\n    }\n\n    return m('ul', children);\n  }\n\n  addMimeType() {\n    this.values.mimeTypes()[this.newMimeType.regex()] = {\n      adapter: this.newMimeType.adapter(),\n      template: this.newMimeType.template(),\n    };\n\n    this.newMimeType.regex('');\n    this.newMimeType.adapter('local');\n    this.newMimeType.template('file');\n  }\n\n  /**\n   * Checks if the values of the fields and checkboxes are different from\n   * the ones stored in the database\n   *\n   * @returns boolean\n   */\n  changed() {\n    const fieldsCheck = this.fields.some((key) => this.values[key]() !== app.data.settings[this.addPrefix(key)]);\n    const checkboxesCheck = this.checkboxes.some((key) => this.values[key]() !== (app.data.settings[this.addPrefix(key)] === '1'));\n    const objectsCheck = this.objects.some((key) => JSON.stringify(this.values[key]()) !== app.data.settings[this.addPrefix(key)]);\n\n    return fieldsCheck || checkboxesCheck || objectsCheck;\n  }\n\n  /**\n   * Saves the settings to the database and redraw the page\n   *\n   * @param e\n   */\n  onsubmit(e) {\n    // prevent the usual form submit behaviour\n    e.preventDefault();\n\n    // if the page is already saving, do nothing\n    if (this.loading) return;\n\n    // prevents multiple savings\n    this.loading = true;\n\n    // remove previous success popup\n    app.alerts.dismiss(this.successAlert);\n\n    const settings = {};\n\n    // gets all the values from the form\n    this.fields.forEach((key) => (settings[this.addPrefix(key)] = this.values[key]()));\n    this.checkboxes.forEach((key) => (settings[this.addPrefix(key)] = this.values[key]()));\n    this.objects.forEach((key) => (settings[this.addPrefix(key)] = JSON.stringify(this.values[key]())));\n\n    // actually saves everything in the database\n    saveSettings(settings)\n      .then(() => {\n        // on success, show popup\n        this.successAlert = app.alerts.show(Alert, { type: 'success' }, app.translator.trans('core.admin.settings.saved_message'));\n      })\n      .catch(() => {})\n      .then(() => {\n        // return to the initial state and redraw the page\n        this.loading = false;\n        m.redraw();\n      });\n  }\n\n  /**\n   * Adds the prefix `this.settingsPrefix` at the beginning of `key`\n   *\n   * @returns string\n   */\n  addPrefix(key) {\n    return this.settingsPrefix + '.' + key;\n  }\n}\n","import UploadPage from './UploadPage';\nimport { commonComponents } from '../../common/components';\n\nexport const components = {\n  ...commonComponents,\n  UploadPage,\n};\n","import { default as extend } from '../common/extend';\nimport Extend from 'flarum/common/extenders';\nimport SharedUploadPage from './components/SharedUploadPage';\n\nexport default [\n  ...extend,\n\n  new Extend.Routes() //\n    .add('adminUploads', '/uploads', SharedUploadPage),\n];\n","import app from 'flarum/admin/app';\nimport { extend } from 'flarum/common/extend';\nimport AdminNav from 'flarum/admin/components/AdminNav';\nimport LinkButton from 'flarum/common/components/LinkButton';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport type Mithril from 'mithril';\n\nexport default function extendAdminNav() {\n  extend(AdminNav.prototype, 'items', function (items: ItemList<Mithril.Children>) {\n    items.add(\n      'shared-uploads',\n      <LinkButton href={app.route('adminUploads')} icon=\"fas fa-file-upload\" title={app.translator.trans('fof-upload.admin.shared-uploads.title')}>\n        {app.translator.trans('fof-upload.admin.nav.shared-uploads-button')}\n      </LinkButton>,\n      49\n    );\n  });\n}\n","import app from 'flarum/admin/app';\nimport UploadPage from './components/UploadPage';\nimport extendAdminNav from './extendAdminNav';\nimport FileListState from '../common/states/FileListState';\n\nexport * from './components';\n\nexport { default as extend } from './extend';\n\napp.initializers.add('fof-upload', () => {\n  app.extensionData\n    .for('fof-upload')\n    .registerPage(UploadPage)\n    .registerPermission(\n      {\n        icon: 'far fa-file',\n        label: app.translator.trans('fof-upload.admin.permissions.upload_label'),\n        permission: 'fof-upload.upload',\n      },\n      'start',\n      50\n    )\n    .registerPermission(\n      {\n        icon: 'fas fa-download',\n        label: app.translator.trans('fof-upload.admin.permissions.download_label'),\n        permission: 'fof-upload.download',\n        allowGuest: true,\n      },\n      'view',\n      50\n    )\n    .registerPermission(\n      {\n        icon: 'fas fa-eye',\n        label: app.translator.trans('fof-upload.admin.permissions.view_user_uploads_label'),\n        permission: 'fof-upload.viewUserUploads',\n      },\n      'moderate',\n      50\n    )\n    .registerPermission(\n      {\n        icon: 'fas fa-trash',\n        label: app.translator.trans('fof-upload.admin.permissions.delete_uploads_of_others_label'),\n        permission: 'fof-upload.deleteUserUploads',\n      },\n      'moderate',\n      50\n    )\n    .registerPermission(\n      {\n        icon: 'far fa-file-alt',\n        label: app.translator.trans('fof-upload.admin.permissions.upload_shared_label'),\n        permission: 'fof-upload.upload-shared-files',\n      },\n      'start'\n    )\n    .registerPermission(\n      {\n        icon: 'far fa-file-alt',\n        label: app.translator.trans('fof-upload.admin.permissions.access_shared_label'),\n        permission: 'fof-upload.access-shared-files',\n      },\n      'start'\n    );\n\n  extendAdminNav();\n\n  //app.fileListState = new FileListState();\n});\n","import app from 'flarum/common/app';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport File from '../models/File';\nimport type Mithril from 'mithril';\nimport User from 'flarum/common/models/User';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport mimeToIcon from '../mimeToIcon';\nimport classList from 'flarum/common/utils/classList';\nimport Button from 'flarum/common/components/Button';\nimport DisplayFile from './DisplayFile';\nimport Alert from 'flarum/common/components/Alert';\nimport extractText from 'flarum/common/utils/extractText';\nimport FileListState from '../states/FileListState';\nimport { ApiPayloadSingle } from 'flarum/common/Store';\nimport icon from 'flarum/common/helpers/icon';\n\nexport interface FileListAttrs extends ComponentAttrs {\n  user: User | null;\n  selectable: boolean;\n  restrictFileType: string | string[];\n  selectedFiles: string[];\n  downloadOnClick: boolean;\n  onFileSelect: (file: File) => void | undefined;\n  onDelete: (file: File) => void | undefined;\n  fileState: FileListState;\n}\n\nexport default abstract class AbstractFileList extends Component<FileListAttrs> {\n  user: User | null = null;\n  inModal!: boolean;\n  restrictFileType!: string | string[] | null;\n  downloadOnClick!: boolean;\n  filesBeingHidden!: string[];\n  fileState!: FileListState;\n\n  public abstract loadFileList(): void;\n  abstract hasMoreResults(): boolean;\n  abstract loadMore(): void;\n  abstract isLoading(): boolean;\n  abstract fileCollection(): File[];\n\n  oninit(vnode: Mithril.Vnode<FileListAttrs, this>) {\n    super.oninit(vnode);\n\n    this.inModal = this.attrs.selectable;\n    this.restrictFileType = this.attrs.restrictFileType || null;\n    this.downloadOnClick = this.attrs.downloadOnClick || false;\n    this.filesBeingHidden = [];\n    this.fileState = this.attrs.fileState;\n\n    this.loadFileList();\n  }\n\n  view() {\n    return (\n      <div className=\"SharedFileList fof-upload-file-list\" aria-live=\"polite\">\n        {/* Loading */}\n        {this.isLoading() && this.fileCollection().length === 0 && (\n          <div className={'fof-upload-loading'}>\n            {app.translator.trans('fof-upload.lib.file_list.loading')}\n\n            <LoadingIndicator />\n          </div>\n        )}\n        {/* Empty file list */}\n        {!this.isLoading() && this.fileCollection().length === 0 && (\n          <div className=\"Placeholder\">\n            <p className=\"fof-upload-empty\">{app.translator.trans('fof-upload.lib.file_list.empty')}</p>\n          </div>\n        )}\n        {/* File list */}\n        <ul>\n          {this.fileCollection().map((file: File) => {\n            const fileIcon = mimeToIcon(file.type());\n            const fileSelectable = this.restrictFileType ? this.isSelectable(file) : true;\n\n            const fileClassNames = classList([\n              'fof-file',\n              // File is image\n              fileIcon === 'far fa-file-image' && 'fof-file-type-image',\n              // File is selected\n              this.attrs.selectedFiles && this.attrs.selectedFiles.indexOf(file.id() ?? '') >= 0 && 'fof-file-selected',\n            ]);\n\n            const isFileHiding = this.filesBeingHidden.includes(file.uuid());\n\n            return (\n              <li aria-busy={isFileHiding} key={file.uuid()}>\n                <DisplayFile\n                  file={file}\n                  fileSelectable={fileSelectable}\n                  isSelected={this.attrs.selectedFiles && this.attrs.selectedFiles.indexOf(file.id() ?? '') >= 0}\n                  fileClassNames={fileClassNames}\n                  isFileHiding={isFileHiding}\n                  onHide={this.hideFile.bind(this)}\n                  onFileClick={this.onFileClick.bind(this)}\n                  user={this.attrs.user}\n                  onDelete={this.onDelete.bind(this)}\n                />\n              </li>\n            );\n          })}\n          {/* Load more files */}\n          {this.hasMoreResults() && (\n            <div className={'fof-load-more-files'}>\n              <Button className={'Button Button--primary'} disabled={this.isLoading()} loading={this.isLoading()} onclick={() => this.loadMore()}>\n                {app.translator.trans('fof-upload.lib.file_list.load_more_files_btn')}\n              </Button>\n            </div>\n          )}\n        </ul>\n      </div>\n    );\n  }\n\n  onDelete(file: File) {\n    if (this.attrs.onDelete) {\n      this.attrs.onDelete(file);\n    }\n  }\n\n  // Common methods like onFileClick, isSelectable, hideFile...\n\n  onFileClick(file: File) {\n    // Custom functionality\n    if (this.attrs.onFileSelect) {\n      this.attrs.onFileSelect(file);\n      return;\n    }\n\n    // Download on click\n    if (this.attrs.downloadOnClick) {\n      window.open(file.url());\n      return;\n    }\n  }\n\n  isSelectable(file: File) {\n    const fileType = file.type();\n\n    // Custom defined file types\n    if (Array.isArray(this.restrictFileType)) {\n      return this.restrictFileType.indexOf(fileType) >= 0;\n    }\n\n    // Image\n    else if (this.restrictFileType === 'image') {\n      return fileType.includes('image/');\n    }\n\n    // Audio\n    else if (this.restrictFileType === 'audio') {\n      return fileType.includes('audio/');\n    }\n\n    // Video\n    else if (this.restrictFileType === 'video') {\n      return fileType.includes('video/');\n    }\n\n    return false;\n  }\n\n  /**\n   * Begins the hiding process for a file.\n   *\n   * - Shows a native confirmation dialog\n   * - If confirmed, sends AJAX request to the hide file API\n   */\n  async hideFile(file: File) {\n    const uuid = file.uuid();\n\n    if (this.filesBeingHidden.includes(uuid)) return;\n\n    this.filesBeingHidden.push(uuid);\n\n    const transPrefix = file.isShared() ? 'fof-upload.lib.file_list.hide_shared_file' : 'fof-upload.lib.file_list.hide_file';\n\n    const confirmToggleHide = confirm(\n      extractText(\n        app.translator.trans(file.hidden() ? `${transPrefix}.show_confirmation` : `${transPrefix}.hide_confirmation`, {\n          fileName: file.baseName(),\n        })\n      )\n    );\n\n    if (confirmToggleHide) {\n      try {\n        const filePayload = await app.request<ApiPayloadSingle>({\n          method: 'PATCH',\n          url: `${app.forum.attribute('apiUrl')}/fof/upload/hide`,\n          body: { uuid },\n        });\n\n        app.store.pushPayload(filePayload);\n        m.redraw();\n\n        app.alerts.show(Alert, { type: 'success' }, [\n          icon(file.hidden() ? 'fas fa-eye-slash' : 'fas fa-eye'),\n          ' ',\n          app.translator.trans(file?.hidden() ? `${transPrefix}.hide_success` : `${transPrefix}.show_success`),\n        ]);\n\n        if (this.fileState.user) {\n          const index = this.fileState.files.findIndex((file: File) => uuid === file.uuid());\n          this.fileState.files.splice(index, 1);\n        }\n      } catch (error) {\n        app.alerts.show(\n          Alert,\n          { type: 'error' },\n          app.translator.trans(file?.hidden() ? `${transPrefix}.hide_fail` : `${transPrefix}.show_fail`, {\n            fileName: file.baseName(),\n          })\n        );\n      } finally {\n        // Remove file from hiding list\n        const i = this.filesBeingHidden.indexOf(uuid);\n        this.filesBeingHidden.splice(i, 1);\n      }\n    }\n  }\n}\n","import app from 'flarum/common/app';\nimport Component, { ComponentAttrs } from 'flarum/common/Component';\nimport File from '../models/File';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Button from 'flarum/common/components/Button';\nimport icon from 'flarum/common/helpers/icon';\nimport mimeToIcon from '../mimeToIcon';\nimport User from 'flarum/common/models/User';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport type Mithril from 'mithril';\nimport Tooltip from 'flarum/common/components/Tooltip';\n\ninterface CustomAttrs extends ComponentAttrs {\n  file: File;\n  fileSelectable: boolean;\n  isSelected: boolean;\n  fileClassNames: string;\n  isFileHiding: boolean;\n  onHide: (file: File) => void | undefined;\n  onFileClick: (file: File) => void | undefined;\n  onDelete: (file: File) => void | undefined;\n  user: User;\n}\n\nexport default class DisplayFile extends Component<CustomAttrs> {\n  isFileHiding!: boolean;\n  imageLoaded: boolean = true;\n  file!: File;\n  fileIcon!: string;\n  isSelected!: boolean;\n  isSelectable!: boolean;\n\n  oninit(vnode: Mithril.Vnode<CustomAttrs, this>) {\n    super.oninit(vnode);\n\n    this.file = this.attrs.file;\n    this.isFileHiding = this.attrs.isFileHiding === undefined ? false : this.attrs.isFileHiding;\n    this.fileIcon = mimeToIcon(this.file.type());\n    this.isSelected = this.attrs.isSelected === undefined ? false : this.attrs.isSelected;\n    this.isSelectable = this.attrs.fileSelectable === undefined ? true : this.attrs.fileSelectable;\n  }\n\n  onbeforeupdate(vnode: Mithril.VnodeDOM<CustomAttrs, this>): void {\n    super.onbeforeupdate(vnode);\n\n    // Make sure the isSelected property is updated\n    this.isSelected = this.attrs.isSelected === undefined ? false : this.attrs.isSelected;\n  }\n\n  view() {\n    const isImage = this.file.type().startsWith('image/');\n\n    const fileSelectedClass = this.isSelected ? 'selected' : '';\n\n    return (\n      <div\n        className={`UploadedFile ${fileSelectedClass}`}\n        key={this.file.uuid()}\n        onclick={() => {\n          if (this.isSelectable && !this.isFileHiding) {\n            this.isSelected = !this.isSelected;\n            this.attrs.onFileClick(this.file);\n          }\n        }}\n        disabled={!this.isSelectable || this.isFileHiding}\n      >\n        {this.imageLoaded && isImage ? (\n          <img\n            src={this.file.url()}\n            className=\"fof-file-image-preview\"\n            draggable={false}\n            onerror={this.handleImageError}\n            onload={this.handleImageLoad}\n            alt={this.file.baseName()}\n          />\n        ) : (\n          this.displayIcon(this.fileIcon)\n        )}\n\n        <div className=\"fof-file-actions\">{this.actionItems(this.file).toArray()}</div>\n\n        <div className=\"fof-file-name\">\n          <Tooltip text={this.file.baseName()}>\n            <span>{this.file.baseName()}</span>\n          </Tooltip>\n        </div>\n\n        {this.isFileHiding && (\n          <div class=\"fof-file-loading\" role=\"status\" aria-label={app.translator.trans('fof-upload.lib.file_list.hide_file.loading')}>\n            <LoadingIndicator />\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  displayIcon(fileIcon: string): Mithril.Children {\n    return (\n      <span\n        className=\"fof-file-icon\"\n        role=\"presentation\"\n        style={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          height: '100%', // Ensure the container takes up the necessary space\n        }}\n      >\n        {icon(`fa-fw ${fileIcon}`)}\n      </span>\n    );\n  }\n\n  actionItems(file: File): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    file.canViewInfo() &&\n      items.add(\n        'view-info',\n        <Button className=\"Button Button--icon fof-file-action\" icon=\"fas fa-info-circle\" aria-label=\"info\" onclick={() => this.viewFileInfo()} />,\n        100\n      );\n\n    const transPrefix = file.isShared() ? 'fof-upload.lib.file_list.hide_shared_file' : 'fof-upload.lib.file_list.hide_file';\n\n    file.canHide() &&\n      items.add(\n        'hide-file',\n        <Button\n          className=\"Button Button--icon fof-file-action\"\n          icon={this.file.hidden() ? 'fas fa-eye' : 'fas fa-eye-slash'}\n          aria-label={app.translator.trans(this.file.hidden() ? `${transPrefix}.btn_a11y_label_show` : `${transPrefix}.btn_a11y_label_hide`, {\n            fileName: file.baseName(),\n          })}\n          disabled={this.isFileHiding}\n          onclick={(e: Event) => this.hide(e)}\n        />,\n        80\n      );\n\n    file.canDelete() &&\n      items.add(\n        'delete-file',\n        <Button\n          className=\"Button Button--icon fof-file-action\"\n          icon=\"fas fa-trash\"\n          aria-label={app.translator.trans('fof-upload.lib.file_list.delete_file_a11y_label', { fileName: file.baseName() })}\n          disabled={this.isFileHiding}\n          onclick={() => this.confirmDelete()}\n        />,\n        60\n      );\n\n    return items;\n  }\n\n  // Function to call when image fails to load\n  handleImageError = () => {\n    this.imageLoaded = false;\n    this.fileIcon = 'fas fa-exclamation-triangle';\n    this.isSelectable = false;\n    m.redraw();\n  };\n\n  // Function to call when image loads successfully\n  handleImageLoad = () => {\n    this.imageLoaded = true;\n    m.redraw();\n  };\n\n  viewFileInfo() {\n    console.log('view file info');\n  }\n\n  hide(e: Event) {\n    e.stopPropagation();\n\n    // TODO: local logic, then:\n\n    if (this.attrs.onHide) {\n      this.attrs.onHide(this.file);\n    }\n  }\n\n  async confirmDelete() {\n    let result = confirm('Are you sure you want to delete this file?');\n\n    if (result) {\n      const uuid = this.file.uuid();\n      await app.request({\n        method: 'DELETE',\n        url: app.forum.attribute('apiUrl') + '/fof/upload/delete/' + uuid,\n      });\n\n      if (this.attrs.onDelete) {\n        this.attrs.onDelete(this.file);\n      }\n    }\n  }\n}\n","import app from 'flarum/common/app';\nimport File from '../models/File';\nimport AbstractFileList from './AbstractFIleList';\n\nexport default class SharedFileList extends AbstractFileList {\n  public loadFileList(): void {\n    this.fileState.loadResults();\n  }\n\n  hasMoreResults() {\n    return this.fileState.hasMoreResults();\n  }\n\n  loadMore() {\n    this.fileState.loadMore();\n  }\n\n  isLoading(): boolean {\n    return this.fileState.isLoading();\n  }\n\n  fileCollection(): File[] {\n    return this.fileState.files;\n  }\n}\n","import app from 'flarum/common/app';\nimport Modal, { IInternalModalAttrs } from 'flarum/common/components/Modal';\nimport Switch from 'flarum/common/components/Switch';\nimport mimeToIcon from '../mimeToIcon';\nimport Button from 'flarum/common/components/Button';\nimport type Mithril from 'mithril';\nimport { ApiResponsePlural } from 'flarum/common/Store';\nimport File from '../models/File';\n\ninterface CustomAttrs extends IInternalModalAttrs {\n  onUploadComplete: (files: File | File[]) => void;\n}\n\nexport default class UploadSharedFileModal extends Modal<CustomAttrs> {\n  files = [];\n  fileInput = null;\n  options = {\n    shared: true,\n    hidden: false,\n  };\n  loading: boolean = false;\n\n  oninit(vnode: Mithril.Vnode<CustomAttrs, this>) {\n    super.oninit(vnode);\n  }\n\n  className() {\n    return 'UploadSharedFileModal Modal--medium';\n  }\n\n  title() {\n    return app.translator.trans('fof-upload.lib.upload-shared-file-modal.title');\n  }\n\n  onFileChange(e) {\n    this.addFiles(Array.from(e.target.files));\n  }\n\n  addFiles(newFiles: File[]) {\n    (this.files as File[]).push(...newFiles);\n    m.redraw();\n  }\n\n  onDragOver(e) {\n    e.preventDefault();\n    e.stopPropagation();\n  }\n\n  onDrop(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.dataTransfer && e.dataTransfer.files) {\n      this.addFiles(Array.from(e.dataTransfer.files));\n    }\n  }\n\n  onDropzoneClick() {\n    if (this.fileInput) {\n      this.fileInput.click();\n    }\n  }\n\n  content() {\n    return (\n      <div className=\"Modal-body\">\n        <div\n          className=\"UploadSharedFileModal-dropzone\"\n          onclick={() => this.onDropzoneClick()}\n          ondragover={this.onDragOver.bind(this)}\n          ondrop={this.onDrop.bind(this)}\n        >\n          {app.translator.trans('fof-upload.lib.upload-shared-file-modal.dropzone')}\n          <input\n            type=\"file\"\n            multiple\n            onchange={this.onFileChange.bind(this)}\n            style={{ opacity: 0, position: 'absolute', left: '-9999px' }}\n            oncreate={(vnode) => {\n              this.fileInput = vnode.dom;\n            }}\n          />\n        </div>\n        <div className=\"UploadSharedFileModal-files\">\n          {this.files.map((file: File) => {\n            const isImage = file.type.startsWith('image/');\n            return (\n              <div className=\"UploadedFile\">\n                {isImage ? <img src={URL.createObjectURL(file)} alt={file.name} /> : <i className={mimeToIcon(file.type)}></i>}\n                <div className=\"UploadedFile-name\">{file.name}</div>\n                {/* Remove button */}\n                <Button\n                  className=\"Button Button--icon Button--link UploadedFile-remove\"\n                  icon=\"fas fa-times\"\n                  onclick={() => {\n                    this.files = this.files.filter((f) => f !== file);\n                  }}\n                />\n              </div>\n            );\n          })}\n        </div>\n        <div className=\"UploadSharedFileModal-options Form-group\">\n          <Switch state={this.options.hidden} onchange={(value: boolean) => (this.options.hidden = value)}>\n            {app.translator.trans('fof-upload.lib.upload-shared-file-modal.hide-from-media-gallery')}\n          </Switch>\n        </div>\n        <div className=\"UploadSharedFileModal-submit App-primaryControl\">\n          <Button\n            className=\"Button Button--primary\"\n            loading={this.loading}\n            onclick={this.upload.bind(this)}\n            disabled={!this.files.length || this.loading}\n          >\n            {app.translator.trans('fof-upload.lib.upload-shared-file-modal.upload')}\n          </Button>\n        </div>\n      </div>\n    );\n  }\n\n  async upload() {\n    this.loading = true;\n    m.redraw();\n\n    const formData = new FormData();\n\n    // Append each file to the form data\n    this.files.forEach((file) => {\n      formData.append('files[]', file);\n    });\n\n    Object.keys(this.options).forEach((key) => {\n      formData.append(`options[${key}]`, this.options[key]);\n    });\n\n    const results = await app.request<ApiResponsePlural<File>>({\n      method: 'POST',\n      url: app.forum.attribute('apiUrl') + '/fof/upload',\n      serialize: (raw: FormData) => raw, // Prevent mithril from trying to serialize FormData\n      body: formData,\n    });\n\n    const uploadedFiles = app.store.pushPayload(results);\n\n    this.attrs.onUploadComplete(uploadedFiles);\n    this.files = [];\n    this.hide();\n\n    this.loading = false;\n    m.redraw();\n  }\n}\n","import Component, { ComponentAttrs } from 'flarum/common/Component';\nimport Button from 'flarum/common/components/Button';\nimport ItemList from 'flarum/common/utils/ItemList';\nimport type Mithril from 'mithril';\nimport mimeToIcon from '../mimeToIcon';\nimport File from '../models/File';\nimport icon from 'flarum/common/helpers/icon';\nimport app from 'flarum/common/app';\nimport classList from 'flarum/common/utils/classList';\n\ninterface CustomAttrs extends ComponentAttrs {\n  file: File;\n  selectable: boolean;\n  fileClassNames: string;\n  onDelete: (file: File) => void | undefined;\n  onFileSelect: (file: File) => void | undefined;\n}\n\nexport default class UploadedFile extends Component<CustomAttrs> {\n  file!: File;\n  callback!: () => void | undefined;\n  imageLoaded: boolean = true;\n\n  oninit(vnode: Mithril.Vnode<CustomAttrs, this>) {\n    super.oninit(vnode);\n\n    this.file = this.attrs.file;\n  }\n\n  view() {\n    const isImage = this.file.type().startsWith('image/');\n    const fileIcon = mimeToIcon(this.file.type());\n    const errorIcon = 'fas fa-exclamation-triangle';\n    const statusIcon = this.file.isPrivateShared() ? 'fas fa-lock' : 'fas fa-unlock';\n\n    return (\n      <div className=\"UploadedFile\" key={this.file.uuid()}>\n        <div className=\"UploadedFile--sharestatus\">\n          <span>\n            {icon(statusIcon)}\n            {this.file.baseName()}\n          </span>\n        </div>\n        <div className=\"UploadedFile--preview\" onclick={() => this.onFileClick(this.file)}>\n          {isImage ? (\n            this.imageLoaded ? (\n              <img\n                className={this.attrs.fileClassNames}\n                src={this.file.url()}\n                loading=\"lazy\"\n                onerror={this.handleImageError}\n                onload={this.handleImageLoad}\n                alt={this.file.baseName()}\n              />\n            ) : (\n              icon(errorIcon, { className: 'icon-fallback' }) // Error icon for failed image load\n            )\n          ) : (\n            icon(fileIcon, { className: 'icon-fallback' }) // Icon representing the file type\n          )}\n        </div>\n        <div className=\"UploadedFile--actions\">{this.actionItems().toArray()}</div>\n      </div>\n    );\n  }\n\n  actionItems(): ItemList<Mithril.Children> {\n    const items = new ItemList<Mithril.Children>();\n\n    items.add(\n      'view-info',\n      <Button className=\"Button Button--icon\" icon=\"fas fa-info-circle\" onclick={() => this.viewFileInfo()} aria-label=\"info\" />\n    );\n\n    items.add(\n      'download',\n      <Button className=\"Button Button--icon\" icon=\"fas fa-download\" onclick={() => window.open(this.file.url())} aria-label=\"download\" />\n    );\n\n    const hideFileIcon = this.file.isPrivateShared() ? 'fas fa-lock' : this.file.hidden() ? 'fas fa-eye' : 'fas fa-eye-slash';\n    items.add('hide-file', <Button className=\"Button Button--icon\" icon={hideFileIcon} onclick={() => this.hideFile()} aria-label=\"hide\" />);\n\n    items.add('delete', <Button className=\"Button Button--icon\" icon=\"fas fa-trash\" onclick={() => this.confirmDelete()} aria-label=\"delete\" />);\n\n    return items;\n  }\n\n  async confirmDelete() {\n    let result = confirm('Are you sure you want to delete this file?');\n\n    if (result) {\n      const uuid = this.file.uuid();\n      await app.request({\n        method: 'DELETE',\n        url: app.forum.attribute('apiUrl') + '/fof/upload/delete/' + uuid,\n      });\n\n      if (this.attrs.onDelete) {\n        this.attrs.onDelete(this.file);\n      }\n    }\n  }\n\n  viewFileInfo() {\n    // TODO:\n    console.log('view file info');\n  }\n\n  hideFile() {\n    // TODO:\n    console.log('hide file');\n  }\n\n  // Function to call when image fails to load\n  handleImageError = () => {\n    this.imageLoaded = false;\n    m.redraw();\n  };\n\n  // Function to call when image loads successfully\n  handleImageLoad = () => {\n    this.imageLoaded = true;\n    m.redraw();\n  };\n\n  onFileClick(file: File) {\n    if (this.attrs.onFileSelect) {\n      this.attrs.onFileSelect(file);\n      return;\n    }\n  }\n}\n","import app from 'flarum/common/app';\nimport File from '../models/File';\nimport AbstractFileList from './AbstractFIleList';\nimport FileListState from '../states/FileListState';\n\nexport default class UserFileList extends AbstractFileList {\n  public loadFileList(): void {\n    //app.fileListState.setUser(this.attrs.user || app.session.user);\n    this.fileState.setUser(this.attrs.user || app.session.user);\n    /**\n     * The user who's media we are dealing with\n     */\n    this.user = this.fileState.user; //app.fileListState.user;\n  }\n\n  hasMoreResults(): boolean {\n    return this.fileState.hasMoreResults();\n  }\n\n  loadMore(): void {\n    this.fileState.loadMore();\n  }\n\n  isLoading(): boolean {\n    return this.fileState.isLoading();\n  }\n\n  fileCollection(): File[] {\n    return this.fileState.files;\n  }\n}\n","import UploadSharedFileModal from './UploadSharedFileModal';\nimport UploadedFile from './UploadedFile';\nimport UserFileList from './UserFileList';\n\nexport const commonComponents = {\n  UploadedFile,\n  UploadSharedFileModal,\n  UserFileList,\n};\n","import Extend from 'flarum/common/extenders';\nimport File from './models/File';\n\nexport default [\n  new Extend.Store() //\n    .add('files', File)\n    .add('shared-files', File),\n];\n","const mimeToIconMap = new Map<string, string>([\n  // Image formats\n  ['image/png', 'far fa-file-image'],\n  ['image/jpg', 'far fa-file-image'],\n  ['image/jpeg', 'far fa-file-image'],\n  ['image/svg+xml', 'far fa-file-image'],\n  ['image/gif', 'far fa-file-image'],\n  ['image/bmp', 'far fa-file-image'],\n  ['image/webp', 'far fa-file-image'],\n\n  // Compressed file formats\n  ['application/zip', 'far fa-file-archive'],\n  ['application/x-7z-compressed', 'far fa-file-archive'],\n  ['application/gzip', 'far fa-file-archive'],\n  ['application/vnd.rar', 'far fa-file-archive'],\n  ['application/x-rar-compressed', 'far fa-file-archive'],\n  ['application/x-tar', 'far fa-file-archive'],\n  ['application/x-iso9660-image', 'far fa-file-archive'],\n\n  // Text and code file formats\n  ['text/plain', 'far fa-file-alt'],\n  ['text/csv', 'far fa-file-csv'],\n  ['text/xml', 'far fa-file-code'],\n  ['text/html', 'far fa-file-code'],\n  ['text/css', 'far fa-file-code'],\n  ['text/javascript', 'far fa-file-code'],\n  ['application/json', 'far fa-file-code'],\n  ['application/ld+json', 'far fa-file-code'],\n  ['application/x-httpd-php', 'far fa-file-code'],\n  ['application/xml', 'far fa-file-code'],\n  ['text/xml', 'far fa-file-code'],\n\n  // Document formats\n  ['application/x-abiword', 'far fa-file-word'],\n  ['application/msword', 'far fa-file-word'],\n  ['application/vnd.openxmlformats-officedocument.wordprocessingml.document', 'far fa-file-word'],\n  ['application/vnd.oasis.opendocument.text', 'far fa-file-word'],\n  ['application/vnd.ms-excel', 'far fa-file-excel'],\n  ['application/vnd.openxmlformats-officedocument.spreadsheetml.sheet', 'far fa-file-excel'],\n  ['application/vnd.oasis.opendocument.spreadsheet', 'far fa-file-excel'],\n  ['application/vnd.ms-powerpoint', 'far fa-file-powerpoint'],\n  ['application/vnd.openxmlformats-officedocument.presentationml.presentation', 'far fa-file-powerpoint'],\n  ['application/vnd.oasis.opendocument.presentation', 'far fa-file-powerpoint'],\n  ['application/pdf', 'far fa-file-pdf'],\n  ['application/rtf', 'far fa-file-alt'],\n\n  // eBook formats\n  ['application/epub+zip', 'far fa-book'],\n  ['application/x-mobipocket-ebook', 'far fa-book'],\n  ['application/vnd.amazon.ebook', 'far fa-book'],\n\n  // Audio formats\n  ['audio/mpeg', 'far fa-file-audio'],\n  ['audio/wav', 'far fa-file-audio'],\n  ['audio/x-wav', 'far fa-file-audio'],\n  ['audio/aac', 'far fa-file-audio'],\n  ['audio/ogg', 'far fa-file-audio'],\n  ['audio/flac', 'far fa-file-audio'],\n  ['audio/aiff', 'far fa-file-audio'],\n  ['audio/x-aiff', 'far fa-file-audio'],\n\n  // Video formats\n  ['video/x-msvideo', 'far fa-file-video'],\n  ['video/mp4', 'far fa-file-video'],\n  ['video/quicktime', 'far fa-file-video'],\n]);\n\nexport default function mimeToIcon(fileType: string): string {\n  // Directly return the icon if the fileType is in the map\n  return (\n    mimeToIconMap.get(fileType) ||\n    (function () {\n      // Check for generic types\n      if (fileType.startsWith('image/')) {\n        return 'far fa-file-image';\n      } else if (fileType.startsWith('video/')) {\n        return 'far fa-file-video';\n      } else if (fileType.startsWith('audio/')) {\n        return 'far fa-file-audio';\n      }\n\n      // Default icon\n      return 'far fa-file';\n    })()\n  );\n}\n","import Model from 'flarum/common/Model';\n\nexport default class File extends Model {\n  baseName() {\n    return Model.attribute<string>('baseName').call(this);\n  }\n\n  path() {\n    return Model.attribute<string>('path').call(this);\n  }\n\n  url() {\n    return Model.attribute<string>('url').call(this);\n  }\n\n  size() {\n    return Model.attribute<number>('size').call(this);\n  }\n\n  type() {\n    return Model.attribute<string>('type').call(this);\n  }\n\n  humanSize() {\n    return Model.attribute<string>('humanSize').call(this);\n  }\n\n  createdAt() {\n    return Model.attribute('createdAt', Model.transformDate).call(this);\n  }\n\n  uuid() {\n    return Model.attribute<string>('uuid').call(this);\n  }\n\n  tag() {\n    return Model.attribute<string>('tag').call(this);\n  }\n\n  hidden() {\n    return Model.attribute<boolean>('hidden').call(this);\n  }\n\n  bbcode() {\n    return Model.attribute<string>('bbcode').call(this);\n  }\n\n  isShared() {\n    return Model.attribute<boolean>('shared').call(this);\n  }\n\n  isPrivateShared() {\n    return Model.attribute<boolean>('isPrivateShared').call(this);\n  }\n\n  canViewInfo() {\n    return Model.attribute<boolean>('canViewInfo').call(this);\n  }\n\n  canHide() {\n    return Model.attribute<boolean>('canHide').call(this);\n  }\n\n  canDelete() {\n    return Model.attribute<boolean>('canDelete').call(this);\n  }\n\n  apiEndpoint() {\n    return '/fof/uploads' + (this.exists ? '/' + this.id() : '');\n  }\n}\n","import app from 'flarum/common/app';\nimport User from 'flarum/common/models/User';\nimport File from '../models/File';\nimport { ApiQueryParamsPlural, ApiResponsePlural } from 'flarum/common/Store';\n\nexport default class FileListState {\n  public user: User | null;\n  public files: File[];\n  private moreResults: boolean;\n  private loading: boolean;\n  private sharedFiles: boolean;\n\n  constructor(sharedFiles: boolean = false) {\n    this.user = null;\n    this.files = [];\n    this.moreResults = false;\n    this.loading = false;\n    this.sharedFiles = sharedFiles;\n  }\n\n  /**\n   * Set the user and load their file list.\n   * @param user The user whose files to load.\n   */\n  public setUser(user: User): void {\n    if (user === this.user) return;\n\n    this.user = user;\n    this.files = [];\n    this.loadResults();\n  }\n\n  public refresh(): void {\n    this.files = [];\n    this.loadResults();\n    m.redraw();\n  }\n\n  /**\n   * Load more files for the current user, starting from the given offset.\n   * @param offset The starting index for loading more files.\n   * @returns A promise resolving to the loaded files.\n   */\n  public async loadResults(offset: number = 0): Promise<ApiResponsePlural<File>> {\n    if (!this.sharedFiles && !this.user) return Promise.reject('User not set');\n\n    this.loading = true;\n\n    let route: string = 'fof/uploads';\n    let params: ApiQueryParamsPlural = {};\n\n    if (!this.sharedFiles && this.user) {\n      params = {\n        filter: { user: this.user.id() },\n        page: { offset },\n      } as ApiQueryParamsPlural;\n    } else {\n      route = 'fof/upload/shared-files';\n      params = {\n        page: { offset },\n      } as ApiQueryParamsPlural;\n    }\n\n    const results = await app.store.find<File[]>(route, params);\n\n    return this.parseResults(results);\n  }\n\n  /**\n   * Load the next set of results.\n   */\n  public async loadMore(): Promise<ApiResponsePlural<File>> {\n    this.loading = true;\n    return this.loadResults(this.files.length);\n  }\n\n  private parseResults(results: ApiResponsePlural<File>): ApiResponsePlural<File> {\n    this.files = results;\n    this.loading = false;\n    this.moreResults = !!results.payload?.links?.next;\n    m.redraw();\n    return results;\n  }\n\n  /**\n   * Add files to the beginning of the list.\n   * @param files The files to be added.\n   */\n  public addToList(files: File | File[]): void {\n    if (Array.isArray(files)) {\n      this.files.unshift(...files);\n    } else {\n      this.files.unshift(files);\n    }\n    m.redraw();\n  }\n\n  /**\n   * Remove files from the list.\n   * @param files The files to be removed.\n   */\n  public removeFromList(files: File | File[]): void {\n    if (Array.isArray(files)) {\n      this.files = this.files.filter((file) => !files.includes(file));\n    } else {\n      this.files = this.files.filter((file) => file !== files);\n    }\n\n    m.redraw();\n  }\n\n  /**\n   * Check if there are files in the list.\n   * @returns True if there are files, false otherwise.\n   */\n  public hasFiles(): boolean {\n    return this.files.length > 0;\n  }\n\n  /**\n   * Check if the file list is currently loading.\n   * @returns True if loading, false otherwise.\n   */\n  public isLoading(): boolean {\n    return this.loading;\n  }\n\n  /**\n   * Check if there are more files to load.\n   * @returns True if there are more files, false otherwise.\n   */\n  public hasMoreResults(): boolean {\n    return this.moreResults;\n  }\n\n  /**\n   * Check if the user has no files and the list is not loading.\n   * @returns True if the list is empty and not loading, false otherwise.\n   */\n  public empty(): boolean {\n    return !this.hasFiles() && !this.isLoading();\n  }\n}\n","module.exports = flarum.core.compat['admin/app'];","module.exports = flarum.core.compat['admin/components/AdminNav'];","module.exports = flarum.core.compat['admin/components/AdminPage'];","module.exports = flarum.core.compat['admin/components/ExtensionPage'];","module.exports = flarum.core.compat['admin/components/UploadImageButton'];","module.exports = flarum.core.compat['admin/utils/saveSettings'];","module.exports = flarum.core.compat['common/Component'];","module.exports = flarum.core.compat['common/Model'];","module.exports = flarum.core.compat['common/app'];","module.exports = flarum.core.compat['common/components/Alert'];","module.exports = flarum.core.compat['common/components/Button'];","module.exports = flarum.core.compat['common/components/Link'];","module.exports = flarum.core.compat['common/components/LinkButton'];","module.exports = flarum.core.compat['common/components/LoadingIndicator'];","module.exports = flarum.core.compat['common/components/Modal'];","module.exports = flarum.core.compat['common/components/Select'];","module.exports = flarum.core.compat['common/components/Switch'];","module.exports = flarum.core.compat['common/components/Tooltip'];","module.exports = flarum.core.compat['common/extend'];","module.exports = flarum.core.compat['common/extenders'];","module.exports = flarum.core.compat['common/helpers/icon'];","module.exports = flarum.core.compat['common/utils/ItemList'];","module.exports = flarum.core.compat['common/utils/Stream'];","module.exports = flarum.core.compat['common/utils/classList'];","module.exports = flarum.core.compat['common/utils/extractText'];","module.exports = flarum.core.compat['common/utils/withAttr'];","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","export * from './src/admin';\n"],"names":["module","exports","require","runtime","Op","Object","prototype","hasOwn","hasOwnProperty","undefined","$Symbol","Symbol","iteratorSymbol","iterator","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","obj","key","value","defineProperty","enumerable","configurable","writable","err","wrap","innerFn","outerFn","self","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","makeInvokeMethod","tryCatch","fn","arg","type","call","GenStateSuspendedStart","GenStateSuspendedYield","GenStateExecuting","GenStateCompleted","ContinueSentinel","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","values","Gp","displayName","defineIteratorMethods","forEach","method","isGeneratorFunction","genFun","ctor","constructor","name","mark","setPrototypeOf","__proto__","awrap","__await","AsyncIterator","PromiseImpl","invoke","resolve","reject","record","result","then","unwrapped","error","previousPromise","enqueue","callInvokeWithMethodAndArg","async","Promise","iter","next","done","state","Error","doneResult","delegate","delegateResult","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","keys","object","reverse","length","pop","iterable","iteratorMethod","isNaN","i","skipTempReset","prev","charAt","slice","stop","rootEntry","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","_catch","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","globalThis","Function","app","Modal","LoadingIndicator","InspectMimeModal","_Modal","_inheritsLoose","apply","arguments","_proto","oninit","vnode","uploading","inspection","className","title","translator","trans","content","m","a","href","onchange","onupload","bind","disabled","component","laravel_validation","laravel_validation_error","mime_detector","php_mime","guessed_extension","event","_this","body","FormData","target","files","append","request","url","forum","attribute","serialize","raw","redraw","default","AdminPage","Button","ItemList","UploadSharedFileModal","SharedFileList","FileListState","SharedUploadPage","_AdminPage","_len","args","Array","_key","concat","sharedUploads","currentPage","fileState","headerInfo","icon","description","mainActionItems","toArray","user","session","selectable","onDelete","showUploadModal","_this2","modal","show","onUploadComplete","uploadComplete","_this3","items","add","onclick","refresh","fileActionItems","file","console","log","addToList","removeFromList","saveSettings","Alert","Select","Switch","UploadImageButton","withAttr","Stream","ExtensionPage","Link","UploadPage","_ExtensionPage","loading","fields","checkboxes","objects","watermarkPositions","center","left","top","right","bottom","composerButtonVisiblityOptions","both","settings","data","settingsPrefix","uploadMethodOptions","addPrefix","templateOptions","JSON","parse","defaultAdap","mimeTypes","adapter","template","newMimeType","regex","max_post","max_upload","onsubmit","maxFileSize","oninput","min","post","upload","map","mime","config","updateMimeTypeKey","options","updateMimeTypeAdapter","getTemplateOptionsForInput","updateMimeTypeTemplate","deleteMimeType","addMimeType","templateOptionsDescriptions","composerButtonVisiblity","mustResize","resizeMaxWidth","whitelistedClientExtensions","addsWatermarks","watermarkPosition","disableHotlinkProtection","disableDownloadLogging","cdnUrl","adaptorItems","changed","external","imgurClientId","qiniuKey","qiniuSecret","qiniuBucket","awsS3Key","awsS3Secret","awsS3Bucket","awsS3Region","awsS3Endpoint","awsS3UsePathStyleEndpoint","awsS3ACL","option","children","trust","fieldsCheck","some","checkboxesCheck","objectsCheck","stringify","e","_this4","preventDefault","alerts","dismiss","successAlert","commonComponents","components","_extends","extend","Extend","Routes","AdminNav","LinkButton","extendAdminNav","route","initializers","extensionData","registerPage","registerPermission","label","permission","allowGuest","Component","mimeToIcon","classList","DisplayFile","extractText","AbstractFileList","_Component","inModal","restrictFileType","downloadOnClick","filesBeingHidden","attrs","loadFileList","view","isLoading","fileCollection","_file$id","_file$id2","fileIcon","fileSelectable","isSelectable","fileClassNames","selectedFiles","indexOf","id","isFileHiding","includes","uuid","isSelected","onHide","hideFile","onFileClick","hasMoreResults","loadMore","onFileSelect","window","open","fileType","isArray","_hideFile","_asyncToGenerator","_regeneratorRuntime","_callee","transPrefix","confirmToggleHide","filePayload","index","_callee$","_context","isShared","confirm","hidden","fileName","baseName","store","pushPayload","findIndex","splice","t0","_x","Tooltip","imageLoaded","handleImageError","handleImageLoad","onbeforeupdate","isImage","startsWith","fileSelectedClass","src","draggable","onerror","onload","alt","displayIcon","actionItems","text","role","style","display","alignItems","justifyContent","height","canViewInfo","viewFileInfo","canHide","hide","canDelete","confirmDelete","stopPropagation","_confirmDelete","_AbstractFileList","loadResults","fileInput","shared","onFileChange","addFiles","from","newFiles","_ref","onDragOver","onDrop","dataTransfer","onDropzoneClick","click","ondragover","ondrop","multiple","opacity","position","oncreate","dom","URL","createObjectURL","filter","f","_upload","formData","results","uploadedFiles","UploadedFile","callback","errorIcon","statusIcon","isPrivateShared","hideFileIcon","UserFileList","setUser","File","Store","mimeToIconMap","Map","get","Model","_Model","path","size","humanSize","createdAt","transformDate","tag","bbcode","apiEndpoint","exists","sharedFiles","moreResults","_loadResults","offset","params","page","find","parseResults","_loadMore","_callee2","_callee2$","_context2","_results$payload","_results$payload$link","payload","links","_this$files","unshift","hasFiles","empty","asyncGeneratorStep","gen","_next","_throw","assign","source","subClass","superClass","_setPrototypeOf","o","p"],"sourceRoot":""}